import{r as d,p as y,o as D,B as I,a as n,c as i,b as e,C as w,N as M,e as R,Z as E,d as b,w as x,G as C,X as S,H as U,I as F,f as r,E as H,K as O,t as k,x as V}from"./app-Bv7sA21o.js";import{_ as q}from"./pagination-B7joSJ4y.js";import{u as G}from"./debouncedRef-B_9CytHk.js";import{d as N}from"./modal-WLjbOo64.js";const K={class:"page-wrap property-add"},P={class:"page-title mb-4"},Q={class:"row gy-3 align-items-center"},X=e("div",{class:"col align-self-end"},[e("h1",{class:"h2 mb-0"},"Collection List")],-1),Z={class:"col-12 col-lg-4"},z={class:"input-group input-icon"},J=e("span",{class:"icon-search"},null,-1),W={class:"col-auto"},Y=e("i",{class:"bi bi-plus-lg fs-6 lh-1 me-2"},null,-1),j={class:"section"},ee={key:0,class:"d-flex justify-content-center py-5"},te=e("div",{class:"spinner-border",role:"status"},null,-1),se=[te],le={key:0,class:"outer-wrapper"},oe={class:"table-wrap"},ae={class:"table-responsive"},ce={class:"table align-middle mb-0 mw-lg"},ne={width:"45px"},ie=e("th",{width:"30%",class:"text-secondary"},"Image",-1),de=e("th",{width:"30%",class:"text-secondary fw-semibold"},"Collection",-1),ue=e("th",{width:"20%",class:"fw-semibold"},"Show On Home",-1),he=e("th",{width:"20%",class:"text-secondary fw-semibold"},"Status",-1),re=e("th",{style:{width:"90px"},class:"text-secondary fw-semibold"},"Action",-1),_e=["checked","value"],me=["src","alt"],pe={class:"form-check form-switch"},ve=["checked","onChange"],fe={class:"form-check form-switch"},ge=["checked","onChange"],ke={class:"action-btn-group mb-0 mw-0"},we=e("i",{class:"bi bi-pencil-square"},null,-1),be=["onClick"],ye=e("i",{class:"icon-bi bi-trash"},null,-1),xe=[ye],Ce={class:"table-footer pt-3"},Se={class:"row align-items-center"},Ve={class:"col-auto"},Ne=["disabled"],Ae={key:0,class:"col"},Le={key:1,class:"message text-center"},Te=e("h6",{class:"fw-bold"},"No Record Found",-1),$e=[Te],Ue={__name:"list",setup(Be){const f=d([]),_=d({}),m=d(!1),c=d(!1),a=d([]),p=d(),v=G("",800),u=d(!1),g=l=>{u.value=!0,r.get("/api/collection",{params:{page:l,search:v.value}}).then(s=>{s.data.status&&(f.value=s.data.data.data,_.value=s.data.data,setTimeout(()=>{c.value=!1,m.value=!1,a.value=[],u.value=!1},400))}).catch(s=>{u.value=!1})};y(v,(l,s)=>{u.value=!0,r.get("/api/collection",{params:{search:l}}).then(t=>{t.data.status&&(f.value=t.data.data.data,_.value=t.data.data,setTimeout(()=>{c.value=!1,m.value=!1,a.value=[],u.value=!1},200))}).catch(t=>{console.log(t)})});const A=()=>{c.value?(m.value=!0,a.value=[],p.value.forEach(l=>{a.value.push(l.value)})):(m.value=!1,a.value=[])};y(a,(l,s)=>{var t;l.length!=((t=p==null?void 0:p.value)==null?void 0:t.length)?c.value=!1:l.length&&(c.value=!0)});const L=l=>{N("Are you sure you want to delete?",s).show();function s(){r.delete(`/api/collection/${l}`).then(t=>{t.data.status&&(k(t.data.message,"success").show(),V(()=>{g()}))}).catch(t=>{console.log(t)})}},T=()=>{N("Are you sure you want to delete?",l).show();function l(){r.post("/api/collection-delete-multiple",{ids:a.value}).then(s=>{s.data.status&&(k(s.data.message,"success").show(),V(()=>{g()}))}).catch(s=>{console.log(s)})}},$=(l,{target:s})=>{r.post(`/api/collection-update-status/${l}`,{status:Number(s.checked)}).then(t=>{t.data.status&&k(t.data.message,"success").show()}).catch(t=>{console.log(t)})},B=(l,{target:s})=>{r.post(`/api/show-on-home-collection/${l}`,{show_on_collection:Number(s.checked)}).then(t=>{t.data.status&&k(t.data.message,"success").show()}).catch(t=>{console.log(t)})};return D(()=>{g()}),(l,s)=>{const t=I("router-link");return n(),i("div",K,[e("div",P,[e("div",Q,[X,e("div",Z,[e("div",z,[J,w(e("input",{type:"text",class:"form-control form-control-sm","onUpdate:modelValue":s[0]||(s[0]=o=>E(v)?v.value=o:null),placeholder:"Search by collection name"},null,512),[[M,R(v)]])])]),e("div",W,[b(t,{to:{name:"add-collection"},class:"btn rounded-pill btn-secondary-light"},{default:x(()=>[Y,H(" Add Collection ")]),_:1})])])]),e("section",j,[u.value?(n(),i("div",ee,se)):(n(),i(C,{key:1},[f.value.length?(n(),i("div",le,[e("div",oe,[e("div",ae,[e("table",ce,[e("thead",null,[e("tr",null,[e("th",ne,[w(e("input",{class:"form-check-input form-check-lg mt-0",type:"checkbox","onUpdate:modelValue":s[1]||(s[1]=o=>c.value=o),onChange:A},null,544),[[S,c.value]])]),ie,de,ue,he,re])]),e("tbody",null,[(n(!0),i(C,null,U(f.value,(o,De)=>(n(),i("tr",null,[e("td",null,[w(e("input",{class:"form-check-input form-check-lg mt-0",ref_for:!0,ref_key:"selectCheckRef",ref:p,checked:m.value,value:o.id,"onUpdate:modelValue":s[2]||(s[2]=h=>a.value=h),type:"checkbox"},null,8,_e),[[S,a.value]])]),e("td",null,[e("img",{src:o.image?o.image:l.placeholder,alt:o.collection_name,height:"30"},null,8,me)]),e("td",null,O(o.collection_name),1),e("td",null,[e("div",pe,[e("input",{class:"form-check-input",type:"checkbox",role:"switch",id:"s1",checked:o.show_on_collection_page==1,onChange:h=>B(o.id,h),"true-value":"1","false-value":"0"},null,40,ve)])]),e("td",null,[e("div",fe,[e("input",{class:"form-check-input",type:"checkbox",role:"switch",id:"s1",checked:o.status==1,onChange:h=>$(o.id,h),"true-value":"1","false-value":"0"},null,40,ge)])]),e("td",null,[e("ul",ke,[e("li",null,[b(t,{to:{name:"add-collection",params:{id:o.id}},class:"btn ps-0 p-1 fs-5 text-black"},{default:x(()=>[we]),_:2},1032,["to"])]),e("li",null,[e("button",{onClick:h=>L(o.id),class:"btn p-1 fs-5 text-black"},xe,8,be)])])])]))),256))])])])]),e("div",Ce,[e("div",Se,[e("div",Ve,[e("button",{class:"btn btn-save btn-primary",onClick:T,disabled:!c.value&&a.value.length==0||a.value.length==0||_.value.total==0}," Delete Selected ",8,Ne)]),_.value.last_page>1?(n(),i("div",Ae,[b(q,{links:_.value.links,onPagination:g},null,8,["links"])])):F("",!0)])])])):(n(),i("div",Le,$e))],64))])])}}};export{Ue as default};
