function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/upload-file-DWJp9l3Q.js","assets/app-Bv7sA21o.js","assets/app-CwtUCi3Q.css","assets/validate-file-EZHt4CEQ.js","assets/modal-WLjbOo64.js","assets/upload-file-DLq5npDo.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
import{u as O,z as Q,r as l,U as W,o as X,B as q,a as o,c as i,b as e,K as z,e as c,d as m,w as V,f as w,x as B,t as T,E as v,F as P,g as $,G as U,H as A,L as C,C as Z,aa as ee,J as H,I as Y,h as ae,R as se,S as te}from"./app-Bv7sA21o.js";import{_ as oe}from"./ckeditor-CoRrIgZH.js";import{d as le}from"./dayjs.min-CU4dOPv8.js";import{f as ie}from"./common-iZsm-le3.js";import"./sourceediting-D-Hsyexd.js";const ne={class:"page-wrap"},de={class:"page-title mb-4"},ce={class:"row gy-3 align-items-center"},re={class:"col align-self-end"},me={class:"h2 mb-0"},ue={class:"col-auto"},pe=e("i",{class:"icon-list me-2"},null,-1),_e={class:"section"},ve={key:0,class:"d-flex justify-content-center py-5"},he=e("div",{class:"spinner-border",role:"status"},null,-1),fe=[he],ge={key:1,class:"outer-wrapper"},ye={class:"row"},xe={class:"col-12"},be={class:"row"},ke={class:"col-12 col-md-6 col-lg-4"},Ve={class:"form-group"},we=e("label",{for:""},[v("Guest Name"),e("span",{class:"text-danger"},"*")],-1),Te={class:"col-12 col-md-6 col-lg-4"},Ue={class:"form-group"},De=e("label",{for:""},[v("Home Name"),e("span",{class:"text-danger"},"*")],-1),Fe=e("option",{value:"",disabled:"",selected:""},"Select Home Name",-1),Ne=["value"],ze={class:"col-12 col-md-6 col-lg-4"},Pe={class:"form-group"},Ce=e("label",{for:""},[v("Date"),e("span",{class:"text-danger"},"*")],-1),Ee={class:"col-12 col-md-6"},Me={class:"form-group ckeditor-form"},Ie=e("label",{for:""},[v("Guest Comments"),e("span",{class:"text-danger"},"*")],-1),Le={class:"col-12 col-md-6"},Re={class:"form-group"},Se={class:"row gx-4"},qe={class:"col-auto"},Be={class:"form-check custom-check"},$e=["id","value","onChange"],Ae=["for"],He=e("span",{class:"text-danger"},"*",-1),Ye={class:"row pt-2"},Ge={class:"col-12"},je={class:"form-group mb-0"},Je={type:"submit",class:"btn btn-save btn-primary"},Ke={key:0,class:"spinner-border spinner-border-sm",role:"status"},Oe={key:1},sa={__name:"add",setup(Qe){const E=se(()=>te(()=>import("./upload-file-DWJp9l3Q.js"),__vite__mapDeps([0,1,2,3,4,5]))),G=O(),h=Q(),u=l(),p=l("image"),M=l({}),D=l([]),g=l(),n=l([]),F=l(null),y=l(!1),x=l(!1),b=l(!0),j=l([{value:"image",name:"Image"},{value:"video",name:"Video"}]),r=W({filePath:"",fileName:""}),I=t=>{M.value=t},L=(t,a=p.value)=>{let d=r,f=n.value;const _=async s=>{b.value=!1,await B(),b.value=!0,f.file_type==s?(d.filePath=f.file_path,d.fileName=f.file):(d.filePath="",d.fileName="")};(a=="video"||a=="image")&&_(a)},R=()=>{w.get("/api/only-homes").then(t=>{t.data.status&&(D.value=t.data.data,D.value.filter(a=>{var d;a.home_name==((d=n.value)==null?void 0:d.home_name)&&(g.value=a.id)}))}).catch(t=>{console.log(t)})},J=()=>{h.params.id?(y.value=!0,w.get(`/api/testimonials/${h.params.id}`).then(t=>{t.data.status&&(n.value=t.data.data,u.value=n.value.date,p.value=n.value.file_type,B(()=>{L(),R()}),setTimeout(()=>{y.value=!1},400))}).catch(t=>{y.value=!1,console.log(t)})):R()},S=t=>{w.get(`/api/testimonials-delete-image/${t}`).then(a=>{a.data.status&&(T(a.data.message,"success").show(),r.filePath="",r.fileName="")}).catch(a=>{T(a.response.data.message,"error").show()})},K=t=>{x.value=!0,h.params.id?F.value=`/api/testimonials/${h.params.id}`:F.value="/api/testimonials",w.post(F.value,{guest_name:t.guest_name,headline:t.headline,home_name:g.value,file:M.value.filename,file_type:p.value,date:le(u.value).format("YYYY-MM-DD")}).then(a=>{a.data.status&&(T(a.data.message,"success").show(),setTimeout(()=>{x.value=!1,G.push({name:"list-testimonial"})},400))}).catch(a=>{T(a.response.data.message,"error").show(),x.value=!1})};return X(()=>{J()}),(t,a)=>{const d=q("router-link"),f=q("DatePicker");return o(),i("div",ne,[e("div",de,[e("div",ce,[e("div",re,[e("h1",me,z(c(h).params.id?"Modify Testimonial":"Add Testimonial"),1)]),e("div",ue,[m(d,{to:{name:"list-testimonial"},class:"btn rounded-pill btn-secondary-light"},{default:V(()=>[pe,v(" Manage ")]),_:1})])])]),e("section",_e,[y.value?(o(),i("div",ve,fe)):(o(),i("div",ge,[m(c(ae),{onSubmit:K},{default:V(({errors:_})=>[e("div",ye,[e("div",xe,[e("div",be,[e("div",ke,[e("div",Ve,[we,m(c(P),{type:"text",name:"guest_name",class:$(["form-control",{"border-danger":_.guest_name}]),modelValue:n.value.guest_name,"onUpdate:modelValue":a[0]||(a[0]=s=>n.value.guest_name=s),rules:"required"},null,8,["class","modelValue"])])]),e("div",Te,[e("div",Ue,[De,m(c(P),{as:"select",name:"home_name",class:$(["form-control",{"border-danger":_.home_name}]),modelValue:g.value,"onUpdate:modelValue":a[1]||(a[1]=s=>g.value=s),rules:"required"},{default:V(()=>[Fe,(o(!0),i(U,null,A(D.value,(s,k)=>(o(),i("option",{key:k,value:s.id},z(s.home_name),9,Ne))),128))]),_:2},1032,["class","modelValue"])])]),e("div",ze,[e("div",Pe,[Ce,m(c(P),{name:"date",modelValue:u.value,"onUpdate:modelValue":a[3]||(a[3]=s=>u.value=s),rules:"required"},{default:V(({field:s})=>[m(f,C(s,{modelValue:u.value,"onUpdate:modelValue":a[2]||(a[2]=k=>u.value=k),format:c(ie),"enable-time-picker":!1,"max-date":new Date,"input-class-name":`form-control ${_.date?"border-danger":""}`,"prevent-min-max-navigation":"","auto-apply":""}),null,16,["modelValue","format","max-date","input-class-name"])]),_:2},1032,["modelValue"])])]),e("div",Ee,[e("div",Me,[Ie,m(oe,{name:"headline",rules:n.value.headline?"":"required",data:n.value.headline,"onUpdate:data":a[4]||(a[4]=s=>n.value.headline=s)},null,8,["rules","data"])])]),e("div",Le,[e("div",Re,[e("div",Se,[(o(!0),i(U,null,A(j.value,(s,k)=>(o(),i("div",qe,[e("div",Be,[Z(e("input",{type:"radio",name:"image-video",class:"form-check-input",id:s.value,value:s.value,"onUpdate:modelValue":a[5]||(a[5]=N=>p.value=N),onChange:N=>L(N,s.value)},null,40,$e),[[ee,p.value]]),e("label",{for:s.value},[v(z(s.name),1),He],8,Ae)])]))),256))]),p.value=="image"?(o(),i(U,{key:0},[b.value?(o(),H(c(E),C({key:0,name:"image",id:"image",fileType:"image",acceptType:"image/*",info:"Max size: 1mb | Image size: 1280px . 720px",changeText:"To change the image please click / drag new image here!",size:"1",ratio:"40%"},r,{rules:r.fileName?"image|ext:jpg,jpeg,webp,svg,png|size:1048":"required|image|ext:jpg,jpeg,webp,svg,png|size:1048",onEmitUploadFile:I,onEmitDeleteUploadFile:S}),null,16,["rules"])):Y("",!0)],64)):(o(),i(U,{key:1},[b.value?(o(),H(c(E),C({key:0,name:"video",id:"video",fileType:"video",acceptType:"video/mp4",info:"Max size: 100mb",changeText:"To change the video please click / drag new video here!",size:"100",ratio:"40%",rules:r.fileName?"size:104800|ext:mp4":"required|size:104800|ext:mp4"},r,{onEmitUploadFile:I,onEmitDeleteUploadFile:S}),null,16,["rules"])):Y("",!0)],64))])])])])]),e("div",Ye,[e("div",Ge,[e("div",je,[e("button",Je,[x.value?(o(),i("div",Ke)):(o(),i("span",Oe,"SUBMIT"))])])])])]),_:1})]))])])}}};export{sa as default};
