import{r as d,p as B,o as E,B as M,a as c,c as n,b as e,d as b,w,G as y,C as x,X as C,H as $,I as D,f,E as I,K as g,t as k,x as A}from"./app-Bv7sA21o.js";import{_ as R}from"./pagination-B7joSJ4y.js";import{d as N}from"./modal-WLjbOo64.js";const T={class:"page-wrap property-add"},F={class:"page-title mb-4"},q={class:"row gy-3 align-items-center"},G=e("div",{class:"col align-self-end"},[e("h1",{class:"h2 mb-0"},"User List")],-1),H={class:"col-auto"},K=e("i",{class:"bi bi-plus-lg fs-6 lh-1 me-2"},null,-1),P={class:"section"},X={key:0,class:"d-flex justify-content-center py-5"},z=e("div",{class:"spinner-border",role:"status"},null,-1),J=[z],O={key:0,class:"outer-wrapper"},Q={class:"table-wrap"},W={class:"table-responsive"},Y={class:"table align-middle mb-0 mw-lg"},Z={width:"45px"},j=e("th",{width:"25%",class:"text-secondary fw-semibold"},"Name",-1),ee=e("th",{class:"text-secondary fw-semibold"},"Role",-1),te=e("th",{class:"text-secondary fw-semibold"},"Email",-1),se=e("th",{class:"text-secondary fw-semibold"},"Mobile",-1),le=e("th",{class:"text-secondary fw-semibold"},"Status",-1),ae=e("th",{style:{width:"90px"},class:"text-secondary fw-semibold"},"Action",-1),oe=["checked","value"],ce={class:"form-check form-switch"},ne=["checked","onChange"],ie={class:"action-btn-group mb-0 mw-0"},de=e("i",{class:"bi bi-pencil-square"},null,-1),ue=["onClick"],re=e("i",{class:"icon-bi bi-trash"},null,-1),he=[re],_e={class:"table-footer pt-3"},ve={class:"row align-items-center"},me={class:"col-auto"},pe=["disabled"],fe={key:0,class:"col"},ge={key:1,class:"message text-center"},be=e("h6",{class:"fw-bold"},"No Record Found",-1),ke=[be],Ne={__name:"list",setup(we){const r=d([]),h=d({}),_=d(!1),i=d(!1),o=d([]),u=d(),v=d(!1),m=l=>{v.value=!0,f.get("/api/user-list",{params:{page:l}}).then(t=>{t.data.status&&(r.value=t.data.data.data,console.log(r.value,"userList.value"),h.value=t.data.data,setTimeout(()=>{i.value=!1,_.value=!1,o.value=[],v.value=!1},400))}).catch(t=>{v.value=!1})},V=()=>{i.value?(_.value=!0,o.value=[],u.value.forEach(l=>{o.value.push(l.value)})):(_.value=!1,o.value=[])};B(o,(l,t)=>{var s;l.length!=((s=u==null?void 0:u.value)==null?void 0:s.length)?i.value=!1:l.length&&(i.value=!0)});const L=l=>{N("Are you sure you want to delete?",t).show();function t(){f.delete(`/api/delete-user/${l}`).then(s=>{s.data.status&&(k(s.data.message,"success").show(),A(()=>{m()}))}).catch(s=>{console.log(s)})}},S=()=>{N("Are you sure you want to delete?",l).show();function l(){f.post("/api/delete-multiple-users",{ids:o.value}).then(t=>{t.data.status&&(k(t.data.message,"success").show(),A(()=>{m()}))}).catch(t=>{console.log(t)})}},U=(l,{target:t})=>{f.post(`/api/user-update-status/${l}`,{status:Number(t.checked)}).then(s=>{s.data.status&&k(s.data.message,"success").show()}).catch(s=>{console.log(s)})};return E(()=>{m()}),(l,t)=>{const s=M("router-link");return c(),n("div",T,[e("div",F,[e("div",q,[G,e("div",H,[b(s,{to:{name:"add-user"},class:"btn rounded-pill btn-secondary-light"},{default:w(()=>[K,I(" Add User ")]),_:1})])])]),e("section",P,[v.value?(c(),n("div",X,J)):(c(),n(y,{key:1},[r.value.length?(c(),n("div",O,[e("div",Q,[e("div",W,[e("table",Y,[e("thead",null,[e("tr",null,[e("th",Z,[x(e("input",{class:"form-check-input form-check-lg mt-0",type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=a=>i.value=a),onChange:V},null,544),[[C,i.value]])]),j,ee,te,se,le,ae])]),e("tbody",null,[(c(!0),n(y,null,$(r.value,(a,ye)=>(c(),n("tr",null,[e("td",null,[x(e("input",{class:"form-check-input form-check-lg mt-0",ref_for:!0,ref_key:"selectCheckRef",ref:u,checked:_.value,value:a.id,"onUpdate:modelValue":t[1]||(t[1]=p=>o.value=p),type:"checkbox"},null,8,oe),[[C,o.value]])]),e("td",null,g(a.name),1),e("td",null,g(a.role),1),e("td",null,g(a.email),1),e("td",null,g(a.mobile_no),1),e("td",null,[e("div",ce,[e("input",{class:"form-check-input",type:"checkbox",role:"switch",id:"s1",checked:a.status==1,onChange:p=>U(a.id,p),"true-value":"1","false-value":"0"},null,40,ne)])]),e("td",null,[e("ul",ie,[e("li",null,[b(s,{to:{name:"add-user",params:{id:a.id}},class:"btn ps-0 p-1 fs-5 text-black"},{default:w(()=>[de]),_:2},1032,["to"])]),e("li",null,[e("button",{onClick:p=>L(a.id),class:"btn p-1 fs-5 text-black"},he,8,ue)])])])]))),256))])])])]),e("div",_e,[e("div",ve,[e("div",me,[e("button",{class:"btn btn-save btn-primary",onClick:S,disabled:!i.value&&o.value.length==0||o.value.length==0||h.value.total==0}," Delete Selected ",8,pe)]),h.value.last_page>1?(c(),n("div",fe,[b(R,{links:h.value.links,onPagination:m},null,8,["links"])])):D("",!0)])])])):(c(),n("div",ge,ke))],64))])])}}};export{Ne as default};
