import{r as d,p as y,o as I,B as M,a as c,c as i,b as e,C as w,N as R,e as x,Z as E,d as b,w as C,G as A,X as S,H as U,I as O,f as r,E as q,K as G,t as k,x as N}from"./app-Bv7sA21o.js";import{p as H}from"./no-img-x9zeKCez.js";import{_ as K}from"./pagination-B7joSJ4y.js";import{u as P}from"./debouncedRef-B_9CytHk.js";import{d as V}from"./modal-WLjbOo64.js";const Q={class:"page-wrap property-add"},X={class:"page-title mb-4"},Z={class:"row gy-3 align-items-center"},z=e("div",{class:"col align-self-end"},[e("h1",{class:"h2 mb-0"},"Amenity List")],-1),J={class:"col-12 col-lg-4"},W={class:"input-group input-icon"},Y=e("span",{class:"icon-search"},null,-1),j={class:"col-auto"},ee=e("i",{class:"bi bi-plus-lg fs-6 lh-1 me-2"},null,-1),te={class:"section"},se={key:0,class:"d-flex justify-content-center py-5"},ae=e("div",{class:"spinner-border",role:"status"},null,-1),le=[ae],oe={key:0,class:"outer-wrapper"},ne={class:"table-wrap"},ce={class:"table-responsive"},ie={class:"table align-middle mb-0 mw-lg"},de={width:"45px"},ue=e("th",{width:"20%",class:"text-secondary fw-semibold"},"Image",-1),he=e("th",{width:"30%",class:"text-secondary fw-semibold"},"Name",-1),re=e("th",{class:"fw-semibold"},"Show On Filter",-1),_e=e("th",{width:"10%",class:"text-secondary fw-semibold"},"Status",-1),me=e("th",{style:{width:"90px"},class:"text-secondary fw-semibold"},"Action",-1),pe=["checked","value"],ve=["src","alt"],fe={class:"form-check form-switch"},ge=["checked","onChange"],ke={class:"form-check form-switch"},we=["checked","onChange"],be={class:"action-btn-group mb-0 mw-0"},ye=e("i",{class:"bi bi-pencil-square"},null,-1),xe=["onClick"],Ce=e("i",{class:"icon-bi bi-trash"},null,-1),Ae=[Ce],Se={class:"table-footer pt-3"},Ne={class:"row align-items-center"},Ve={class:"col-auto"},Le=["disabled"],Te={key:0,class:"col"},$e={key:1,class:"message text-center"},Be=e("h6",{class:"fw-bold"},"No Record Found",-1),De=[Be],Oe={__name:"list",setup(Fe){const f=d([]),_=d({}),m=d(!1),n=d(!1),o=d([]),p=d(),v=P("",800),u=d(!1),g=a=>{u.value=!0,r.get("/api/amenities",{params:{page:a,search:v.value}}).then(s=>{s.data.status&&(f.value=s.data.data.data,_.value=s.data.data,setTimeout(()=>{n.value=!1,m.value=!1,o.value=[],u.value=!1},400))}).catch(s=>{u.value=!1})};y(v,(a,s)=>{u.value=!0,r.get("/api/amenities",{params:{search:a}}).then(t=>{t.data.status&&(f.value=t.data.data.data,_.value=t.data.data,setTimeout(()=>{n.value=!1,m.value=!1,o.value=[],u.value=!1},200))}).catch(t=>{console.log(t)})});const L=()=>{n.value?(m.value=!0,o.value=[],p.value.forEach(a=>{o.value.push(a.value)})):(m.value=!1,o.value=[])};y(o,(a,s)=>{var t;a.length!=((t=p==null?void 0:p.value)==null?void 0:t.length)?n.value=!1:a.length&&(n.value=!0)});const T=a=>{V("Are you sure you want to delete?",s).show();function s(){r.delete(`/api/amenities/${a}`).then(t=>{t.data.status&&(k(t.data.message,"success").show(),N(()=>{g()}))}).catch(t=>{console.log(t)})}},$=()=>{V("Are you sure you want to delete?",a).show();function a(){r.post("/api/amenities-delete-multiple",{ids:o.value}).then(s=>{s.data.status&&(k(s.data.message,"success").show(),N(()=>{g()}))}).catch(s=>{console.log(s)})}},B=(a,{target:s})=>{r.post(`/api/amenities-update-status/${a}`,{status:Number(s.checked)}).then(t=>{t.data.status&&k(t.data.message,"success").show()}).catch(t=>{console.log(t)})},D=(a,{target:s})=>{r.post(`/api/show-on-home-filter/${a}`,{show_on_filter:Number(s.checked)}).then(t=>{t.data.status&&k(t.data.message,"success").show()}).catch(t=>{console.log(t)})};return I(()=>{g()}),(a,s)=>{const t=M("router-link");return c(),i("div",Q,[e("div",X,[e("div",Z,[z,e("div",J,[e("div",W,[Y,w(e("input",{type:"text",class:"form-control form-control-sm","onUpdate:modelValue":s[0]||(s[0]=l=>E(v)?v.value=l:null),placeholder:"Search by name"},null,512),[[R,x(v)]])])]),e("div",j,[b(t,{to:{name:"add-amenities"},class:"btn rounded-pill btn-secondary-light"},{default:C(()=>[ee,q(" Add Amenity ")]),_:1})])])]),e("section",te,[u.value?(c(),i("div",se,le)):(c(),i(A,{key:1},[f.value.length?(c(),i("div",oe,[e("div",ne,[e("div",ce,[e("table",ie,[e("thead",null,[e("tr",null,[e("th",de,[w(e("input",{class:"form-check-input form-check-lg mt-0",type:"checkbox","onUpdate:modelValue":s[1]||(s[1]=l=>n.value=l),onChange:L},null,544),[[S,n.value]])]),ue,he,re,_e,me])]),e("tbody",null,[(c(!0),i(A,null,U(f.value,(l,F)=>(c(),i("tr",{key:F},[e("td",null,[w(e("input",{class:"form-check-input form-check-lg mt-0",ref_for:!0,ref_key:"selectCheckRef",ref:p,checked:m.value,value:l.id,"onUpdate:modelValue":s[2]||(s[2]=h=>o.value=h),type:"checkbox"},null,8,pe),[[S,o.value]])]),e("td",null,[e("img",{src:l.amenities_image?l.amenities_image:x(H),alt:l.amenities_name,height:"30"},null,8,ve)]),e("td",null,G(l.amenities_name),1),e("td",null,[e("div",fe,[e("input",{class:"form-check-input",type:"checkbox",role:"switch",id:"s1",checked:l.show_on_filter==1,onChange:h=>D(l.id,h),"true-value":"1","false-value":"0"},null,40,ge)])]),e("td",null,[e("div",ke,[e("input",{class:"form-check-input",type:"checkbox",role:"switch",id:"s1",checked:l.status==1,onChange:h=>B(l.id,h),"true-value":"1","false-value":"0"},null,40,we)])]),e("td",null,[e("ul",be,[e("li",null,[b(t,{to:{name:"add-amenities",params:{id:l.id}},class:"btn ps-0 p-1 fs-5 text-black"},{default:C(()=>[ye]),_:2},1032,["to"])]),e("li",null,[e("button",{onClick:h=>T(l.id),class:"btn p-1 fs-5 text-black"},Ae,8,xe)])])])]))),128))])])])]),e("div",Se,[e("div",Ne,[e("div",Ve,[e("button",{class:"btn btn-save btn-primary",onClick:$,disabled:!n.value&&o.value.length==0||o.value.length==0||_.value.total==0}," Delete Selected ",8,Le)]),_.value.last_page>1?(c(),i("div",Te,[b(K,{links:_.value.links,onPagination:g},null,8,["links"])])):O("",!0)])])])):(c(),i("div",$e,De))],64))])])}}};export{Oe as default};
