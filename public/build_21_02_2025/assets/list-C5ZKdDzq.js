import{r as d,p as x,o as L,B as M,a as c,c as i,b as e,C as b,N as R,e as $,Z as E,d as k,w as C,G as N,X as S,H as U,I as F,f as p,E as G,K as y,t as w,x as V}from"./app-Bv7sA21o.js";import{_ as q}from"./pagination-B7joSJ4y.js";import{u as H}from"./debouncedRef-B_9CytHk.js";import{d as A}from"./modal-WLjbOo64.js";const K={class:"page-wrap property-add"},P={class:"page-title mb-4"},Q={class:"row gy-3 align-items-center"},X=e("div",{class:"col align-self-end"},[e("h1",{class:"h2 mb-0"},"Company List")],-1),Z={class:"col-12 col-lg-4"},z={action:""},J={class:"input-group input-icon"},O=e("span",{class:"icon-search"},null,-1),W={class:"col-auto"},Y=e("i",{class:"bi bi-plus-lg fs-6 lh-1 me-2"},null,-1),j={class:"section"},ee={key:0,class:"d-flex justify-content-center py-5"},te=e("div",{class:"spinner-border",role:"status"},null,-1),se=[te],ae={key:0,class:"outer-wrapper"},le={class:"table-wrap"},oe={class:"table-responsive"},ne={class:"table align-middle mb-0 mw-lg"},ce={width:"45px"},ie=e("th",{width:"35%",class:"text-secondary fw-semibold"},"Name",-1),de=e("th",{class:"text-secondary fw-semibold"},"State",-1),ue=e("th",{width:"12%",class:"text-secondary fw-semibold"},"GST No.",-1),he=e("th",{width:"15%",class:"text-secondary fw-semibold"},"CIN No.",-1),re=e("th",{width:"10%",class:"text-secondary fw-semibold"},"Status",-1),_e=e("th",{style:{width:"90px"},class:"text-secondary fw-semibold"},"Action",-1),me=["checked","value"],pe={class:"form-check form-switch"},ve=["checked","onChange"],fe={class:"action-btn-group mb-0 mw-0"},ge=e("i",{class:"bi bi-pencil-square"},null,-1),ye=["onClick"],be=e("i",{class:"icon-bi bi-trash"},null,-1),ke=[be],we={class:"table-footer pt-3"},xe={class:"row align-items-center"},Ce={class:"col-auto"},Ne=["disabled"],Se={key:0,class:"col"},Ve={key:1,class:"message text-center"},Ae=e("h6",{class:"fw-bold"},"No Record Found",-1),Te=[Ae],$e={__name:"list",setup(Be){const v=d([]),h=d({}),r=d(!1),n=d(!1),o=d([]),_=d(),m=H("",800),u=d(!1),f=a=>{u.value=!0,p.get("/api/company",{params:{page:a,search:m.value}}).then(t=>{t.data.status&&(v.value=t.data.data.data,h.value=t.data.data,setTimeout(()=>{n.value=!1,r.value=!1,o.value=[],u.value=!1},400))}).catch(t=>{u.value=!1})};x(m,(a,t)=>{u.value=!0,p.get("/api/company",{params:{search:a}}).then(s=>{s.data.status&&(v.value=s.data.data.data,h.value=s.data.data,setTimeout(()=>{n.value=!1,r.value=!1,o.value=[],u.value=!1},200))}).catch(s=>{console.log(s)})});const T=()=>{n.value?(r.value=!0,o.value=[],_.value.forEach(a=>{o.value.push(a.value)})):(r.value=!1,o.value=[])};x(o,(a,t)=>{var s;a.length!=((s=_==null?void 0:_.value)==null?void 0:s.length)?n.value=!1:a.length&&(n.value=!0)});const B=a=>{A("Are you sure you want to delete?",t).show();function t(){p.delete(`/api/company/${a}`).then(s=>{s.data.status&&(w(s.data.message,"success").show(),V(()=>{f()}))}).catch(s=>{console.log(s)})}},D=()=>{A("Are you sure you want to delete?",a).show();function a(){p.post("/api/company-delete-multiple",{ids:o.value}).then(t=>{t.data.status&&(w(t.data.message,"success").show(),V(()=>{f()}))}).catch(t=>{console.log(t)})}},I=(a,{target:t})=>{p.post(`/api/company-update-status/${a}`,{status:Number(t.checked)}).then(s=>{(s.data.status="success")&&w(s.data.message,"success").show()}).catch(s=>{console.log(s)})};return L(()=>{f()}),(a,t)=>{const s=M("router-link");return c(),i("div",K,[e("div",P,[e("div",Q,[X,e("div",Z,[e("form",z,[e("div",J,[O,b(e("input",{type:"text",class:"form-control form-control-sm","onUpdate:modelValue":t[0]||(t[0]=l=>E(m)?m.value=l:null),placeholder:"Search by name"},null,512),[[R,$(m)]])])])]),e("div",W,[k(s,{to:{name:"add-company"},class:"btn rounded-pill btn-secondary-light"},{default:C(()=>[Y,G(" Add Company ")]),_:1})])])]),e("section",j,[u.value?(c(),i("div",ee,se)):(c(),i(N,{key:1},[v.value.length?(c(),i("div",ae,[e("div",le,[e("div",oe,[e("table",ne,[e("thead",null,[e("tr",null,[e("th",ce,[b(e("input",{class:"form-check-input form-check-lg mt-0",type:"checkbox","onUpdate:modelValue":t[1]||(t[1]=l=>n.value=l),onChange:T},null,544),[[S,n.value]])]),ie,de,ue,he,re,_e])]),e("tbody",null,[(c(!0),i(N,null,U(v.value,(l,De)=>(c(),i("tr",null,[e("td",null,[b(e("input",{class:"form-check-input form-check-lg mt-0",ref_for:!0,ref_key:"selectCheckRef",ref:_,checked:r.value,value:l.id,"onUpdate:modelValue":t[2]||(t[2]=g=>o.value=g),type:"checkbox"},null,8,me),[[S,o.value]])]),e("td",null,y(l.company_name),1),e("td",null,y(l.state_name),1),e("td",null,y(l.gst_no),1),e("td",null,y(l.cin_no),1),e("td",null,[e("div",pe,[e("input",{class:"form-check-input",type:"checkbox",role:"switch",id:"s1",checked:l.status==1,onChange:g=>I(l.id,g),"true-value":"1","false-value":"0"},null,40,ve)])]),e("td",null,[e("ul",fe,[e("li",null,[k(s,{to:{name:"add-company",params:{id:l.id}},class:"btn ps-0 p-1 fs-5 text-black"},{default:C(()=>[ge]),_:2},1032,["to"])]),e("li",null,[e("button",{onClick:g=>B(l.id),class:"btn p-1 fs-5 text-black"},ke,8,ye)])])])]))),256))])])])]),e("div",we,[e("div",xe,[e("div",Ce,[e("button",{class:"btn btn-save btn-primary",onClick:D,disabled:!n.value&&o.value.length==0||o.value.length==0||h.value.total==0}," Delete Selected ",8,Ne)]),h.value.last_page>1?(c(),i("div",Se,[k(q,{links:h.value.links,onPagination:f},null,8,["links"])])):F("",!0)])])])):(c(),i("div",Ve,Te))],64))])])}}};export{$e as default};
