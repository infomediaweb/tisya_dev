import{r,p as N,o as F,B as R,a as i,c as d,b as e,C as b,N as U,e as k,Z as $,d as w,w as y,G as V,X as S,f as h,t as v,E as G,H,K as x,x as T}from"./app-Bv7sA21o.js";import"./dayjs.min-CU4dOPv8.js";import{V as I}from"./vue-draggable-next.esm-bundler-C6HHcIkS.js";import{u as q}from"./debouncedRef-B_9CytHk.js";import{f as K}from"./common-iZsm-le3.js";import{d as A}from"./modal-WLjbOo64.js";const Q={class:"page-wrap properties-page"},X={class:"page-title mb-4"},Z={class:"row gy-3 align-items-center"},z=e("div",{class:"col align-self-end"},[e("h1",{class:"h2 mb-0"},"Testimonials List")],-1),J={class:"col-lg-4"},O={action:""},P={class:"input-group input-icon"},W=e("span",{class:"icon-search"},null,-1),Y={class:"col-auto"},j=e("i",{class:"bi bi-plus-lg fs-6 lh-1 me-2"},null,-1),ee={class:"section"},te={key:0,class:"d-flex justify-content-center py-5"},se=e("div",{class:"spinner-border",role:"status"},null,-1),ae=[se],oe={key:0,class:"outer-wrapper"},le={class:"table-wrap"},ne={class:"table-responsive"},ce={class:"table align-middle mb-0 mw-lg"},ie={width:"45px"},de=e("th",{class:"text-secondary fw-semibold",style:{width:"30%"}},"Guest Name",-1),ue=e("th",{class:"text-secondary fw-semibold"},"Home Name",-1),re=e("th",{class:"text-secondary fw-semibold"},"Date",-1),he=e("th",{class:"text-secondary fw-semibold"},"Status",-1),me=e("th",{style:{width:"90px"},class:"text-secondary fw-semibold"},"Action",-1),_e=["checked","value"],pe={class:"form-check form-switch"},ve=["checked","onChange"],fe={class:"action-btn-group mb-0 mw-0"},ge=e("i",{class:"bi bi-pencil-square"},null,-1),be=["onClick"],ke=e("i",{class:"icon-bi bi-trash"},null,-1),we=[ke],ye={class:"table-footer pt-3"},xe={class:"row align-items-center"},Ce={class:"col-auto"},Ne=["disabled"],Ve={key:1,class:"message text-center"},Se=e("h6",{class:"fw-bold"},"No Record Found",-1),Te=[Se],Re={__name:"list",setup(Ae){const c=r([]),m=r(!1),n=r(!1),l=r([]),_=r(),p=q("",800),u=r(!1),g=o=>{u.value=!0,h.get("/api/testimonials",{params:{page:o,search:p.value}}).then(t=>{t.data.status&&(c.value=t.data.data,setTimeout(()=>{n.value=!1,m.value=!1,l.value=[],u.value=!1},400))}).catch(t=>{u.value=!1})};N(p,(o,t)=>{u.value=!0,h.get("/api/testimonials",{params:{search:o}}).then(s=>{s.data.status&&(c.value=s.data.data,setTimeout(()=>{n.value=!1,m.value=!1,l.value=[],u.value=!1},200))}).catch(s=>{console.log(s)})});const D=()=>{n.value?(m.value=!0,l.value=[],_.value.forEach(o=>{l.value.push(o.value)})):(m.value=!1,l.value=[])};N(l,(o,t)=>{var s;o.length!=((s=_==null?void 0:_.value)==null?void 0:s.length)?n.value=!1:o.length&&(n.value=!0)});const L=o=>{A("Are you sure you want to delete?",t).show();function t(){h.delete(`/api/testimonials/${o}`).then(s=>{s.data.status&&(v(s.data.message,"success").show(),T(()=>{g()}))}).catch(s=>{console.log(s)})}},B=()=>{A("Are you sure you want to delete?",o).show();function o(){h.post("/api/testimonials-delete-multiple-record",{ids:l.value}).then(t=>{t.data.status&&(v(t.data.message,"success").show(),T(()=>{g()}))}).catch(t=>{console.log(t)})}},M=(o,{target:t},s)=>{h.post(`/api/testimonials-update-status/${o}`,{status:Number(t.checked)}).then(a=>{a.data.status&&(v(a.data.message,"success").show(),c.value[s].status=Number(t.checked))}).catch(a=>{console.log(a)})},E=o=>{let t=c.value.map(s=>s.id);h.post("/api/testimonials-save-position",{position:t}).then(s=>{s.data.status&&v(s.data.message,"success").show()}).catch(s=>{v(s.response.data.message,"error").show()})};return F(()=>{g()}),(o,t)=>{const s=R("router-link");return i(),d("div",Q,[e("div",X,[e("div",Z,[z,e("div",J,[e("form",O,[e("div",P,[W,b(e("input",{type:"text",class:"form-control form-control-sm","onUpdate:modelValue":t[0]||(t[0]=a=>$(p)?p.value=a:null),placeholder:"Search by guest name"},null,512),[[U,k(p)]])])])]),e("div",Y,[w(s,{to:{name:"add-testimonial"},class:"btn rounded-pill btn-secondary-light"},{default:y(()=>[j,G(" Add Testimonial ")]),_:1})])])]),e("section",ee,[u.value?(i(),d("div",te,ae)):(i(),d(V,{key:1},[c.value.length?(i(),d("div",oe,[e("div",le,[e("div",ne,[e("table",ce,[e("thead",null,[e("tr",null,[e("th",ie,[b(e("input",{class:"form-check-input form-check-lg mt-0",type:"checkbox","onUpdate:modelValue":t[1]||(t[1]=a=>n.value=a),onChange:D},null,544),[[S,n.value]])]),de,ue,re,he,me])]),w(k(I),{list:c.value,animation:"200","ghost-class":"td-drag",onChange:E,class:"move",filter:".form-check-input, .action-btn-group",tag:"tbody"},{default:y(()=>[(i(!0),d(V,null,H(c.value,(a,C)=>(i(),d("tr",{key:C},[e("td",null,[b(e("input",{class:"form-check-input form-check-lg mt-0",ref_for:!0,ref_key:"selectCheckRef",ref:_,checked:m.value,value:a.id,"onUpdate:modelValue":t[2]||(t[2]=f=>l.value=f),type:"checkbox"},null,8,_e),[[S,l.value]])]),e("td",null,x(a.guest_name),1),e("td",null,x(a.home_name),1),e("td",null,x(k(K)(a.date)),1),e("td",null,[e("div",pe,[e("input",{class:"form-check-input",type:"checkbox",role:"switch",id:"s1",checked:a.status==1,onChange:f=>M(a.id,f,C),"true-value":"1","false-value":"0"},null,40,ve)])]),e("td",null,[e("ul",fe,[e("li",null,[w(s,{to:{name:"add-testimonial",params:{id:a.id}},class:"btn ps-0 p-1 fs-5 text-black"},{default:y(()=>[ge]),_:2},1032,["to"])]),e("li",null,[e("button",{onClick:f=>L(a.id),class:"btn p-1 fs-5 text-black"},we,8,be)])])])]))),128))]),_:1},8,["list"])])])]),e("div",ye,[e("div",xe,[e("div",Ce,[e("button",{class:"btn btn-save btn-primary",onClick:B,disabled:!n.value&&l.value.length==0||l.value.length==0}," Delete Selected ",8,Ne)])])])])):(i(),d("div",Ve,Te))],64))])])}}};export{Re as default};
