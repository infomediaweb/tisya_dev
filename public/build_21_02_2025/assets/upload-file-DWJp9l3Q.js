import{j as N,z,r as b,Q as v,ac as C,o as P,x as j,a as l,c as i,G as h,b as t,e as o,n as R,I as y,K as m,g as V,f as E,a1 as M,a2 as A,E as S}from"./app-Bv7sA21o.js";import{v as G}from"./validate-file-EZHt4CEQ.js";import{d as K}from"./modal-WLjbOo64.js";const f=e=>(M("data-v-3dceedbe"),e=e(),A(),e),L={key:0,class:"d-flex justify-content-center py-5"},O=f(()=>t("div",{class:"spinner-border",role:"status"},null,-1)),Q=[O],Y=["name","id","accept"],$={class:"upload-info"},q=["src"],H={key:1,controls:""},J=["src"],W={class:"upload-info-text"},X=f(()=>t("i",{class:"bi bi-trash"},null,-1)),Z=[X],ee={key:1,class:"text-danger mt-2 fs-12"},te=f(()=>t("i",{class:"icon-upload"},null,-1)),ae={class:"upload-info-text"},se=f(()=>t("strong",null,[S("Drag & Drop Or "),t("span",{class:"text-primary"},"Browse"),S(" Your File.")],-1)),le={class:"text-danger mt-2 fs-12"},ie={__name:"upload-file",props:{name:String,id:String,fileType:String,acceptType:String,rules:String,info:String,changeText:String,isDeleteDisabled:Boolean,fileName:String,filePath:String,size:String,ratio:String},emits:["emitUploadFile","emitDeleteUploadFile","emitDeleteFrontendUploadFile"],setup(e,{emit:D}){const r=e,F=z(),d=D,a=b({}),p=b(!1),k=v(r,"filePath"),T=v(r,"name"),U=v(r,"rules"),{errorMessage:c,handleBlur:x,handleChange:_,resetField:w,meta:oe}=C(T,U),B=async u=>{const s=u.target.files[0],n=new FormData;if(u.target.value=null,n.append("file",s),G(s,c.value,Number(r.size))==!1){a.value={};return}try{p.value=!0;const g=await E.post("/api/upload",n);g.data.status&&(a.value=g.data,d("emitUploadFile",a.value),setTimeout(()=>{p.value=!1},300))}catch{}},I=()=>{a.value.uploadType?(a.value={},d("emitDeleteFrontendUploadFile")):K("Are you sure you want to delete permanently?",function(){a.value={},F.params.id?d("emitDeleteUploadFile",F.params.id):d("emitDeleteUploadFile")}).show()};return P(()=>{k.value&&(a.value={filepath:r.filePath,filename:r.fileName},j(()=>{d("emitUploadFile",a.value)}))}),(u,s)=>(l(),i("div",{class:V(["upload-wrapper",{"border-danger":!!o(c)}])},[p.value?(l(),i("div",L,Q)):(l(),i(h,{key:1},[t("input",{type:"file",name:e.name,id:e.id,accept:e.acceptType,onInput:s[0]||(s[0]=(...n)=>o(_)&&o(_)(...n)),onBlur:s[1]||(s[1]=(...n)=>o(x)&&o(x)(...n)),onChange:B},null,40,Y),t("div",$,[a.value.filepath?(l(),i(h,{key:0},[t("div",{class:"ratio ratio-16x9",style:R({"--bs-aspect-ratio":e.ratio?e.ratio:""})},[e.fileType=="image"?(l(),i("img",{key:0,src:a.value.filepath,class:"object-fit-contain"},null,8,q)):e.fileType=="video"?(l(),i("video",H,[t("source",{src:a.value.filepath,type:"video/mp4"},null,8,J)])):y("",!0)],4),t("div",W,[e.isDeleteDisabled?y("",!0):(l(),i("button",{key:0,type:"button",class:"btn-link-icon text-danger mb-2",onClick:s[2]||(s[2]=n=>(I(),o(w)()))},Z)),t("small",null,m(e.changeText),1),o(c)?(l(),i("small",ee,m(o(c)),1)):y("",!0)])],64)):(l(),i(h,{key:1},[te,t("div",ae,[se,t("small",null,m(e.info),1),t("small",le,m(o(c)),1)])],64))])],64))],2))}},ce=N(ie,[["__scopeId","data-v-3dceedbe"]]);export{ce as default};
