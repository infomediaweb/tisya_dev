import{r as u,o as x,a as o,c as i,b as s,d as _,w,a0 as p,M as k,e as m,f as v,t as S,g as K,G as T,H as B,K as C,F as E,h as F}from"./app-Bv7sA21o.js";const M={class:"page-wrap property-add"},N=s("div",{class:"page-title mb-4"},[s("div",{class:"row gy-3 align-items-center"},[s("div",{class:"col align-self-end"},[s("h1",{class:"h2 mb-0"},"Email Setting")])])],-1),L={class:"section"},J={key:0,class:"d-flex justify-content-center py-5"},O=s("div",{class:"spinner-border",role:"status"},null,-1),V=[O],j={key:1,class:"page-content"},q={class:"row"},z={class:"col-12 col-lg-8"},A={class:"form-group"},D={class:"tag-item"},G={class:"tag-content"},H={class:"tag-text"},I=["onClick"],U=s("i",{class:"bi bi-x-lg"},null,-1),$=[U],P={class:"tag-input"},Q={class:"col-12"},R={type:"submit",class:"btn btn-save btn-primary"},W={key:0,class:"spinner-border spinner-border-sm",role:"status"},X={key:1},ts={__name:"email",setup(Y){const e=u([]),r=u(!1),d=u(!1),g=()=>{r.value=!0,v.get("/api/setting").then(t=>{var a;if(t.data.status){let n=JSON.parse((a=t.data.data[0])==null?void 0:a.emails);e.value=n,setTimeout(()=>{r.value=!1},400)}}).catch(t=>{r.value=!1})},h=(t,a,n)=>{const l=t.target.value.trim();l&&!a&&!e.value.some(c=>c.text===l)&&(e.value.push({text:l}),n())},f=t=>{e.value.splice(t,1)},b=()=>{d.value=!0,v.post("/api/update-email-setting",{emails:e.value}).then(t=>{t.data.status&&(S(t.data.message,"success").show(),setTimeout(()=>{d.value=!1},400))}).catch(t=>{d.value=!1})};return x(()=>{g()}),(t,a)=>(o(),i("div",M,[N,s("section",L,[r.value?(o(),i("div",J,V)):(o(),i("div",j,[_(m(F),{onKeypress:a[0]||(a[0]=p(k(()=>{},["prevent"]),["enter"])),onSubmit:b},{default:w(({errors:n,resetForm:l})=>[s("div",q,[s("div",z,[s("div",A,[s("div",{class:K(["tags-input-wrapper",{"border-danger":n.tags}])},[s("ul",null,[(o(!0),i(T,null,B(e.value,(c,y)=>(o(),i("li",D,[s("div",G,[s("div",H,C(c.text),1),s("button",{onClick:Z=>f(y),type:"button",class:"tag-action"},$,8,I)])]))),256)),s("li",P,[_(m(E),{name:"tags",type:"text",class:"form-control",placeholder:"Add Email",rules:e.value.length?"email":"required|email",onKeyup:p(c=>h(c,n.tags,l),["enter"])},null,8,["rules","onKeyup"])])])],2)])]),s("div",Q,[s("button",R,[d.value?(o(),i("div",W)):(o(),i("span",X,"SUBMIT"))])])])]),_:1})]))])]))}};export{ts as default};
