import{_ as $}from"./tooltip-BrvWqPPW.js";import{r as f,U,o as M,a as o,c as n,b as t,d as c,w as y,e as _,f as V,t as S,V as T,G as C,H as N,g as b,F as h,I as x,E as F,h as A}from"./app-Bv7sA21o.js";const B={class:"page-wrap property-add"},q=t("div",{class:"page-title mb-4"},[t("div",{class:"row gy-3 align-items-center"},[t("div",{class:"col align-self-end"},[t("h1",{class:"h2 mb-0"},"GST")])])],-1),G={class:"section"},L={key:0,class:"d-flex justify-content-center py-5"},E=t("div",{class:"spinner-border",role:"status"},null,-1),z=[E],H={key:1,class:"outer-wrapper"},P={class:"table-wrap"},D={class:"table-responsive"},J={class:"table align-middle table-list mb-0 mw-lg"},K=t("thead",null,[t("tr",null,[t("th",{class:"text-secondary fw-semibold"},"Start Tariff / Night"),t("th",{class:"text-secondary fw-semibold"},"Upto Tariff / Night"),t("th",{class:"text-secondary fw-semibold"},"Percentage %"),t("th",{style:{width:"90px"},class:"text-secondary text-center fw-semibold"},"Action")])],-1),O={class:"form-group mb-0"},Q={class:"form-group mb-0"},R={class:"form-group mb-0"},W={class:"input-group"},X=t("span",{class:"input-group-text"},"%",-1),Y={key:0,class:"action-btn-group justify-content-center mb-0 mw-0"},Z=["onClick"],j=t("i",{class:"icon-bi bi-trash"},null,-1),tt=[j],st={class:"table-footer pt-3"},et={class:"row align-items-center"},at={class:"col-auto"},lt=["onClick","disabled"],ot=t("i",{class:"bi bi-plus-lg me-2"},null,-1),nt={class:"table-footer pt-4"},rt={class:"row align-items-center"},ct={class:"col-12"},it={class:"btn btn-save btn-primary"},dt={key:0,class:"spinner-border spinner-border-sm",role:"status"},ut={key:1},bt={__name:"gst",setup(_t){const i=f(!1),m=f(!1),g=U({addMultiItem:[{slabs_start:1,slabs_upto:"",gst_percentage:""}]}),d=e=>e[e.length-1].value,v=()=>{i.value=!0,V.get("/api/gst-slabs").then(e=>{e.data.status&&(e.data.data.length?(g.addMultiItem=e.data.data,setTimeout(()=>{i.value=!1},400)):i.value=!1)}).catch(e=>{i.value=!1,console.log(e)})},w=e=>{m.value=!0,V.post("/api/gst-slabs",{addMultiItem:e.addMultiItem}).then(u=>{u.data.status&&setTimeout(()=>{m.value=!1,S(u.data.message,"success").show(),v()},400)}).catch(u=>{m.value=!1})};return M(()=>{v()}),(e,u)=>(o(),n("div",B,[q,t("section",G,[i.value?(o(),n("div",L,z)):(o(),n("div",H,[c(_(A),{onSubmit:w,"initial-values":g},{default:y(({errors:p})=>[t("div",P,[c(_(T),{name:"addMultiItem"},{default:y(({fields:a,push:I,remove:k})=>[t("div",D,[t("table",J,[K,t("tbody",null,[(o(!0),n(C,null,N(a,(l,s)=>(o(),n("tr",{key:s,class:b({disabled:s!=a.length-1})},[t("td",null,[t("div",O,[c(_(h),{name:`slabs_start${s}`,type:"text",class:b(["form-control",{"border-danger":p[`slabs_start${s}`]}]),modelValue:l.value.slabs_start,"onUpdate:modelValue":r=>l.value.slabs_start=r,readonly:"",rules:"required"},null,8,["name","class","modelValue","onUpdate:modelValue"])])]),t("td",null,[t("div",Q,[c(_(h),{name:`slabs_upto${s}`,type:"text",class:b(["form-control",{"border-danger":p[`slabs_upto${s}`]}]),modelValue:l.value.slabs_upto,"onUpdate:modelValue":r=>l.value.slabs_upto=r,rules:{required:!0,numeric:!0,min_value:l.value.slabs_start+1},"data-bs-toggle":"tooltip"},null,8,["name","class","modelValue","onUpdate:modelValue","rules"]),c($,{error:p[`slabs_upto${s}`],message:"Value should be greater than Start Tariff / Night"},null,8,["error"])])]),t("td",null,[t("div",R,[t("div",W,[c(_(h),{name:`gst_percentage${s}`,type:"text",class:b(["form-control",{"border-danger":p[`gst_percentage${s}`]}]),modelValue:l.value.gst_percentage,"onUpdate:modelValue":r=>l.value.gst_percentage=r,rules:"required|numeric"},null,8,["name","class","modelValue","onUpdate:modelValue"]),X])])]),t("td",null,[s&&s==a.length-1?(o(),n("ul",Y,[t("li",null,[t("button",{onClick:r=>k(s),class:"btn p-1 fs-5 text-black"},tt,8,Z)])])):x("",!0)])],2))),128))])])]),t("div",st,[t("div",et,[t("div",at,[t("button",{type:"button",class:"btn btn-save btn-secondary",onClick:l=>I({slabs_start:parseInt(d(a).slabs_upto)+1,slabs_upto:"",gst_percentage:""}),disabled:!d(a).slabs_upto||!d(a).gst_percentage||parseInt(d(a).slabs_upto)<=parseInt(d(a).slabs_start)},[ot,F("Add More ")],8,lt)])])])]),_:2},1024)]),t("div",nt,[t("div",rt,[t("div",ct,[t("button",it,[m.value?(o(),n("div",dt)):(o(),n("span",ut,"SUBMIT"))])])])])]),_:1},8,["initial-values"])]))])]))}};export{bt as default};
