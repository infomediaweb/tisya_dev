import{r as _,p as C,o as T,B as D,a as l,c as n,b as e,C as b,N as F,e as R,Z as U,d as x,w as S,G as N,X as A,H as G,I as k,f as u,E as K,K as h,t as m,x as V}from"./app-Bv7sA21o.js";import{_ as P}from"./pagination-B7joSJ4y.js";import{u as Q}from"./debouncedRef-B_9CytHk.js";import{d as O}from"./modal-WLjbOo64.js";const X={class:"page-wrap properties-page"},Z={class:"page-title mb-4"},z={class:"row gy-3 align-items-center"},J=e("div",{class:"col align-self-end"},[e("h1",{class:"h2 mb-0"},"Manage Homes")],-1),W={class:"col-lg-4"},Y={action:""},j={class:"input-group input-icon"},ee=e("span",{class:"icon-search"},null,-1),te={class:"col-auto"},se=e("i",{class:"bi bi-plus-lg fs-6 lh-1 me-2"},null,-1),oe={class:"section"},ae={key:0,class:"d-flex justify-content-center py-5"},le=e("div",{class:"spinner-border",role:"status"},null,-1),ne=[le],ce={key:0,class:"outer-wrapper"},ie={class:"table-wrap"},de={class:"table-responsive"},ue={class:"table align-middle mb-0 mw-lg"},he={width:"45px"},_e=e("th",{style:{width:"90px"},class:"fw-semibold"},"Image",-1),re=e("th",{class:"text-secondary fw-semibold",style:{width:"20%"}},"Name",-1),me=e("th",{class:"text-secondary"},"Internal name",-1),pe=e("th",{class:"text-secondary fw-semibold"},"Location",-1),fe=e("th",{class:"text-secondary fw-semibold"},"State",-1),ve=e("th",{class:"fw-semibold"},"Only For Enquiry",-1),ge=e("th",{class:"fw-semibold"},"Show On Home",-1),ke=e("th",{class:"fw-semibold"},"Show On Apartment",-1),we=e("th",{class:"text-secondary fw-semibold"},"Status",-1),ye=e("th",{style:{width:"90px"},class:"text-secondary fw-semibold"},"Action",-1),be=["checked","value"],xe=["src"],Ce={class:"p-detail pe-5"},Se={key:0},Ne={key:1},Ae={key:2},Ve={key:3},Oe={class:"form-check form-switch"},$e=["checked","onChange"],qe={class:"form-check form-switch"},Be=["checked","onChange"],He={class:"form-check form-switch"},Ie=["checked","onChange"],Ee={class:"form-check form-switch"},Le=["checked","onChange"],Me={class:"action-btn-group mb-0 mw-0"},Te=e("i",{class:"bi bi-pencil-square"},null,-1),De=["onClick"],Fe=e("i",{class:"icon-bi bi-trash"},null,-1),Re=[Fe],Ue={class:"table-footer pt-3"},Ge={class:"row align-items-center"},Ke={class:"col-auto"},Pe=["disabled"],Qe={key:0,class:"col"},Xe={key:1,class:"message text-center"},Ze=e("h6",{class:"fw-bold"},"No Record Found",-1),ze=[Ze],tt={__name:"manage",setup(Je){const w=_([]),p=_({}),f=_(!1),d=_(!1),c=_([]),v=_(),g=Q("",800),r=_(!1),y=a=>{r.value=!0,u.get("/api/home",{params:{page:a,search:g.value}}).then(s=>{s.data.status&&(w.value=s.data.data.data,p.value=s.data.data,setTimeout(()=>{d.value=!1,f.value=!1,c.value=[],r.value=!1},400))}).catch(s=>{r.value=!1})};C(g,(a,s)=>{r.value=!0,u.get("/api/home",{params:{search:a}}).then(t=>{t.data.status&&(w.value=t.data.data.data,p.value=t.data.data,setTimeout(()=>{d.value=!1,f.value=!1,c.value=[],r.value=!1},200))}).catch(t=>{console.log(t)})});const $=(a,{target:s})=>{u.post(`/api/show-on-home-update/${a}`,{show_on_home:Number(s.checked)}).then(t=>{t.data.status&&m(t.data.message,"success").show()}).catch(t=>{console.log(t)})},q=(a,{target:s})=>{u.post(`/api/show-enquiry-update/${a}`,{only_for_enquiry:Number(s.checked)}).then(t=>{t.data.status&&m(t.data.message,"success").show()}).catch(t=>{console.log(t)})},B=(a,{target:s})=>{u.post(`/api/show-on-apartment-update/${a}`,{show_on_apartment:Number(s.checked)}).then(t=>{t.data.status&&m(t.data.message,"success").show()}).catch(t=>{console.log(t)})},H=()=>{d.value?(f.value=!0,c.value=[],v.value.forEach(a=>{c.value.push(a.value)})):(f.value=!1,c.value=[])};C(c,(a,s)=>{var t;a.length!=((t=v==null?void 0:v.value)==null?void 0:t.length)?d.value=!1:a.length&&(d.value=!0)});const I=a=>{O("Are you sure you want to delete?",s).show();function s(){u.delete(`/api/home/${a}`).then(t=>{t.data.status&&(m(t.data.message,"success").show(),V(()=>{y()}))}).catch(t=>{console.log(t)})}},E=()=>{O("Are you sure you want to delete?",a).show();function a(){u.post("/api/home-delete-multiple",{ids:c.value}).then(s=>{s.data.status&&(m(s.data.message,"success").show(),V(()=>{y()}))}).catch(s=>{console.log(s)})}},L=(a,{target:s})=>{u.post(`/api/home-update-status/${a}`,{status:Number(s.checked)}).then(t=>{t.data.status&&m(t.data.message,"success").show()}).catch(t=>{console.log(t)})};return T(()=>{y()}),(a,s)=>{const t=D("router-link");return l(),n("div",X,[e("div",Z,[e("div",z,[J,e("div",W,[e("form",Y,[e("div",j,[ee,b(e("input",{type:"text",class:"form-control form-control-sm","onUpdate:modelValue":s[0]||(s[0]=o=>U(g)?g.value=o:null),placeholder:"Search by name,Internal name, location, state"},null,512),[[F,R(g)]])])])]),e("div",te,[x(t,{to:{name:"add-home"},class:"btn rounded-pill btn-secondary-light"},{default:S(()=>[se,K(" Add Home ")]),_:1})])])]),e("section",oe,[r.value?(l(),n("div",ae,ne)):(l(),n(N,{key:1},[w.value.length?(l(),n("div",ce,[e("div",ie,[e("div",de,[e("table",ue,[e("thead",null,[e("tr",null,[e("th",he,[b(e("input",{class:"form-check-input form-check-lg mt-0",type:"checkbox","onUpdate:modelValue":s[1]||(s[1]=o=>d.value=o),onChange:H},null,544),[[A,d.value]])]),_e,re,me,pe,fe,ve,ge,ke,we,ye])]),e("tbody",null,[(l(!0),n(N,null,G(w.value,(o,M)=>(l(),n("tr",{key:M},[e("td",null,[b(e("input",{class:"form-check-input form-check-lg mt-0",ref_for:!0,ref_key:"selectCheckRef",ref:v,checked:f.value,value:o.id,"onUpdate:modelValue":s[2]||(s[2]=i=>c.value=i),type:"checkbox"},null,8,be),[[A,c.value]])]),e("td",null,[e("img",{width:"85px",src:o.image_full_path},null,8,xe)]),e("td",null,[e("div",Ce,[e("h3",null,h(o.home_name),1),e("p",null,[o.maximum_number_of_guests?(l(),n("span",Se,"Occupancy: "+h(o.maximum_number_of_guests),1)):k("",!0),o.no_of_bedrooms?(l(),n("span",Ne," | Bedrooms: "+h(o.no_of_bedrooms),1)):k("",!0),o.no_of_bathrooms?(l(),n("span",Ae," | Bathrooms: "+h(o.no_of_bathrooms),1)):k("",!0),o.no_of_staff?(l(),n("span",Ve," | Staff: "+h(o.no_of_staff),1)):k("",!0)])])]),e("td",null,h(o.internal_name),1),e("td",null,h(o.location),1),e("td",null,h(o.state),1),e("td",null,[e("div",Oe,[e("input",{class:"form-check-input",type:"checkbox",role:"switch",id:"s1",checked:o.only_for_enquiry==1,onChange:i=>q(o.id,i),"true-value":"1","false-value":"0"},null,40,$e)])]),e("td",null,[e("div",qe,[e("input",{class:"form-check-input",type:"checkbox",role:"switch",id:"s1",checked:o.show_on_home==1,onChange:i=>$(o.id,i),"true-value":"1","false-value":"0"},null,40,Be)])]),e("td",null,[e("div",He,[e("input",{class:"form-check-input",type:"checkbox",role:"switch",id:"s1",checked:o.show_on_apartment==1,onChange:i=>B(o.id,i),"true-value":"1","false-value":"0"},null,40,Ie)])]),e("td",null,[e("div",Ee,[e("input",{class:"form-check-input",type:"checkbox",role:"switch",id:"s1",checked:o.status==1,onChange:i=>L(o.id,i),"true-value":"1","false-value":"0"},null,40,Le)])]),e("td",null,[e("ul",Me,[e("li",null,[x(t,{to:{name:"add-home",params:{id:o.id}},class:"btn ps-0 p-1 fs-5 text-black"},{default:S(()=>[Te]),_:2},1032,["to"])]),e("li",null,[e("button",{onClick:i=>I(o.id),class:"btn p-1 fs-5 text-black"},Re,8,De)])])])]))),128))])])])]),e("div",Ue,[e("div",Ge,[e("div",Ke,[e("button",{class:"btn btn-save btn-primary",onClick:E,disabled:!d.value&&c.value.length==0||c.value.length==0||p.value.total==0}," Delete Selected ",8,Pe)]),p.value.last_page>1?(l(),n("div",Qe,[x(P,{links:p.value.links,onPagination:y},null,8,["links"])])):k("",!0)])])])):(l(),n("div",Xe,ze))],64))])])}}};export{tt as default};
