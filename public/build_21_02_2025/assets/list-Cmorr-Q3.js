import{r as d,p as C,o as R,B as $,a as n,c as i,b as e,C as b,N as E,e as k,Z as U,d as y,w as V,G as N,X as S,H as F,I as P,f as v,E as q,K as A,t as w,x as B}from"./app-Bv7sA21o.js";import{_ as G}from"./pagination-B7joSJ4y.js";import{p as H}from"./no-img-x9zeKCez.js";import{u as K}from"./debouncedRef-B_9CytHk.js";import{d as L}from"./modal-WLjbOo64.js";import{f as Q}from"./common-iZsm-le3.js";import"./dayjs.min-CU4dOPv8.js";const X={class:"page-wrap properties-page"},Z={class:"page-title mb-4"},z={class:"row gy-3 align-items-center"},J=e("div",{class:"col align-self-end"},[e("h1",{class:"h2 mb-0"},"Blogs")],-1),O={class:"col-lg-4"},W={action:""},Y={class:"input-group input-icon"},j=e("span",{class:"icon-search"},null,-1),ee={class:"col-auto"},te=e("i",{class:"bi bi-plus-lg fs-6 lh-1 me-2"},null,-1),se={class:"section"},ae={key:0,class:"d-flex justify-content-center py-5"},le=e("div",{class:"spinner-border",role:"status"},null,-1),oe=[le],ce={key:0,class:"outer-wrapper"},ne={class:"table-wrap"},ie={class:"table-responsive"},de={class:"table align-middle mb-0 mw-lg"},ue={width:"45px"},re=e("th",{width:"80px",class:"text-secondary fw-semibold"},"Image",-1),he=e("th",{class:"text-secondary fw-semibold",style:{width:"45%"}},"Title",-1),_e=e("th",{class:"text-secondary fw-semibold"},"Date",-1),pe=e("th",{class:"text-secondary fw-semibold"},"Status",-1),me=e("th",{style:{width:"90px"},class:"text-secondary fw-semibold"},"Action",-1),ve=["checked","value"],fe=["src","alt"],ge={class:"form-check form-switch"},be=["checked","onChange"],ke={class:"action-btn-group mb-0 mw-0"},ye=e("i",{class:"bi bi-pencil-square"},null,-1),we=["onClick"],xe=e("i",{class:"icon-bi bi-trash"},null,-1),Ce=[xe],Ve={class:"table-footer pt-3"},Ne={class:"row align-items-center"},Se={class:"col-auto"},Ae=["disabled"],Be={key:0,class:"col"},Le={key:1,class:"message text-center"},Te=e("h6",{class:"fw-bold"},"No Record Found",-1),De=[Te],qe={__name:"list",setup(Ie){const r=d([]),h=d({}),_=d(!1),c=d(!1),o=d([]),p=d(),m=K("",800),u=d(!1),g=l=>{u.value=!0,v.get("/api/blogs",{params:{page:l,search:m.value}}).then(t=>{t.data.status&&(r.value=t.data.data.data,h.value=t.data.data,setTimeout(()=>{c.value=!1,_.value=!1,o.value=[],u.value=!1},400))}).catch(t=>{u.value=!1})};C(m,(l,t)=>{u.value=!0,v.get("/api/blogs",{params:{search:l}}).then(a=>{a.data.status&&(r.value=a.data.data.data,h.value=a.data.data,setTimeout(()=>{c.value=!1,_.value=!1,o.value=[],u.value=!1},200))}).catch(a=>{console.log(a)})});const T=()=>{c.value?(_.value=!0,o.value=[],p.value.forEach(l=>{o.value.push(l.value)})):(_.value=!1,o.value=[])};C(o,(l,t)=>{var a;l.length!=((a=p==null?void 0:p.value)==null?void 0:a.length)?c.value=!1:l.length&&(c.value=!0)});const D=l=>{L("Are you sure you want to delete?",t).show();function t(){v.delete(`/api/blogs/${l}`).then(a=>{a.data.status&&(w(a.data.message,"success").show(),B(()=>{g()}))}).catch(a=>{console.log(a)})}},I=()=>{L("Are you sure you want to delete?",l).show();function l(){v.post("/api/blogs-delete-multiple-record",{ids:o.value}).then(t=>{t.data.status&&(w(t.data.message,"success").show(),B(()=>{g()}))}).catch(t=>{console.log(t)})}},M=(l,{target:t},a)=>{v.post(`/api/blogs-update-status/${l}`,{status:Number(t.checked)}).then(s=>{s.data.status&&(w(s.data.message,"success").show(),r.value[a].status=Number(t.checked))}).catch(s=>{console.log(s)})};return R(()=>{g()}),(l,t)=>{const a=$("router-link");return n(),i("div",X,[e("div",Z,[e("div",z,[J,e("div",O,[e("form",W,[e("div",Y,[j,b(e("input",{type:"text",class:"form-control form-control-sm","onUpdate:modelValue":t[0]||(t[0]=s=>U(m)?m.value=s:null),placeholder:"Search by title"},null,512),[[E,k(m)]])])])]),e("div",ee,[y(a,{to:{name:"add-blog"},class:"btn rounded-pill btn-secondary-light"},{default:V(()=>[te,q(" Add Blog ")]),_:1})])])]),e("section",se,[u.value?(n(),i("div",ae,oe)):(n(),i(N,{key:1},[r.value.length?(n(),i("div",ce,[e("div",ne,[e("div",ie,[e("table",de,[e("thead",null,[e("tr",null,[e("th",ue,[b(e("input",{class:"form-check-input form-check-lg mt-0",type:"checkbox","onUpdate:modelValue":t[1]||(t[1]=s=>c.value=s),onChange:T},null,544),[[S,c.value]])]),re,he,_e,pe,me])]),e("tbody",null,[(n(!0),i(N,null,F(r.value,(s,x)=>(n(),i("tr",{key:x},[e("td",null,[b(e("input",{class:"form-check-input form-check-lg mt-0",ref_for:!0,ref_key:"selectCheckRef",ref:p,checked:_.value,value:s.id,"onUpdate:modelValue":t[2]||(t[2]=f=>o.value=f),type:"checkbox"},null,8,ve),[[S,o.value]])]),e("td",null,[e("img",{src:s.image_path?s.image_path:k(H),alt:s.name,height:"30"},null,8,fe)]),e("td",null,A(s.title),1),e("td",null,A(k(Q)(s.date)),1),e("td",null,[e("div",ge,[e("input",{class:"form-check-input",type:"checkbox",role:"switch",id:"s1",checked:s.status==1,onChange:f=>M(s.id,f,x),"true-value":"1","false-value":"0"},null,40,be)])]),e("td",null,[e("ul",ke,[e("li",null,[y(a,{to:{name:"add-blog",params:{id:s.id}},class:"btn ps-0 p-1 fs-5 text-black"},{default:V(()=>[ye]),_:2},1032,["to"])]),e("li",null,[e("button",{onClick:f=>D(s.id),class:"btn p-1 fs-5 text-black"},Ce,8,we)])])])]))),128))])])])]),e("div",Ve,[e("div",Ne,[e("div",Se,[e("button",{class:"btn btn-save btn-primary",onClick:I,disabled:!c.value&&o.value.length==0||o.value.length==0||h.value.total==0}," Delete Selected ",8,Ae)]),h.value.last_page>1?(n(),i("div",Be,[y(G,{links:h.value.links,onPagination:l.getLocationList},null,8,["links","onPagination"])])):P("",!0)])])])):(n(),i("div",Le,De))],64))])])}}};export{qe as default};
