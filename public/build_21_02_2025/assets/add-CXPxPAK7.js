function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/multi-select-Dla7bimF.js","assets/app-Bv7sA21o.js","assets/app-CwtUCi3Q.css","assets/multi-select-Vek3NNQL.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
import{z as se,u as ne,r as d,p as E,o as de,B as ee,a as c,c as D,b as e,K as ie,e as s,d as n,w as y,f as P,x as ue,t as A,E as r,F as i,g as U,L as R,J as N,h as re,R as ce,S as me}from"./app-Bv7sA21o.js";import"./sourceediting-D-Hsyexd.js";import{d as S}from"./dayjs.min-CU4dOPv8.js";import{f as L,s as M}from"./common-iZsm-le3.js";const pe={class:"page-wrap property-add"},_e={class:"page-title mb-4"},ve={class:"row gy-3 align-items-center"},fe={class:"col align-self-end"},ye={class:"h2 mb-0"},ge={class:"col-auto"},he=e("i",{class:"icon-list me-2"},null,-1),Ve={class:"section"},be={key:0,class:"d-flex justify-content-center py-5"},ke=e("div",{class:"spinner-border",role:"status"},null,-1),xe=[ke],De={key:1,class:"page-content"},Ue={class:"row"},Se={class:"col-12"},we={class:"row"},Me={class:"col-12 col-lg-4 col-xxl-4"},Ce={class:"form-group"},Te=e("label",{for:""},[r("Name"),e("span",{class:"text-danger"},"*")],-1),Ye={class:"col-6 col-lg-4 col-xxl-3"},Ee={class:"form-group"},Pe=e("label",{for:""},[r("Start Date"),e("span",{class:"text-danger"},"*")],-1),Re={class:"col-6 col-lg-4 col-xxl-3"},Le={class:"form-group"},qe=e("label",{for:""},[r("End Date"),e("span",{class:"text-danger"},"*")],-1),Be={class:"col-12 col-lg-4"},Fe={class:"form-group"},Ae=e("label",{for:""},[r("Use Type"),e("span",{class:"text-danger"},"*")],-1),Ne={class:"row g-3 align-items-center"},$e={class:"col-auto"},Ie={class:"form-check form-radio-check"},je=e("label",{for:"r-single",class:"form-check-label"},"Single",-1),ze={class:"col-auto"},Je={class:"form-check form-radio-check"},Oe=e("label",{for:"r-multiple",class:"form-check-label"},"Multiple",-1),Ge={class:"col-12 col-xxl"},Ke=e("div",{class:"fs-10 fst-italic text-danger pt-1"},'For multiple coupons with unlimited use, select "Multiple" and leave the field blank',-1),He={class:"col-12 col-lg-4"},Qe={class:"form-group"},We=e("label",{for:""},[r("Discount"),e("span",{class:"text-danger"},"*")],-1),Xe={class:"row g-3 align-items-center"},Ze={class:"col-auto"},eo={class:"form-check form-radio-check"},oo=e("label",{for:"r-percentage",class:"form-check-label"},"Percentage",-1),ao={class:"col-auto"},to={class:"form-check form-radio-check"},lo=e("label",{for:"r-flat",class:"form-check-label"},"Flat",-1),so={class:"col-12 col-xxl"},no={class:"col-12 col-lg-4"},io={class:"form-group"},uo=e("label",{for:""},[r("Generate Code By"),e("span",{class:"text-danger"},"*")],-1),ro={class:"row g-3 align-items-center"},co={class:"col-auto"},mo={class:"form-check form-radio-check"},po=e("label",{for:"r-self",class:"form-check-label"},"Self",-1),_o={class:"col-auto"},vo={class:"form-check form-radio-check"},fo=e("label",{for:"r-auto",class:"form-check-label"},"Auto",-1),yo={class:"col-12 col-xxl"},go={key:1,class:"row gx-2"},ho={class:"col-4"},Vo={class:"col-8"},bo={class:"col-12 col-lg-6"},ko={class:"form-group"},xo=e("label",{for:""},[r("Stay dates between "),e("small",null,"(From/To, including the start and end night)"),e("span",{class:"text-danger"},"*")],-1),Do={class:"row gy-3"},Uo={class:"col"},So={class:"col"},wo={class:"col-12 col-lg-3"},Mo={class:"form-group"},Co=e("label",{for:""},[r("Property Type "),e("small",null,"(Multiple Selection)")],-1),To={class:"col-12 col-lg-3"},Yo={class:"form-group"},Eo=e("label",{for:""},[r("Property "),e("small",null,"(Multiple Selection)")],-1),Po={class:"row pt-2"},Ro={class:"col-12"},Lo={class:"form-group mb-0"},qo={class:"btn btn-save btn-primary"},Bo={key:0,class:"spinner-border spinner-border-sm",role:"status"},Fo={key:1},zo={__name:"add",setup(Ao){const $=ce(()=>me(()=>import("./multi-select-Dla7bimF.js"),__vite__mapDeps([0,1,2,3]))),C=se(),oe=ne(),I=S(),m=d(),p=d(),q=d(I.format()),j=d(),z=d(),_=d(),v=d(),B=d(I.format()),J=d(),O=d(),G=d(0),f=d("single"),g=d("percentage"),h=d("self"),w=d([]),b=d([]),K=d([]),H=d([]),l=d({}),ae=d(null),T=d(!1),Y=d(!1),Q=(t,o,k,x)=>{t&&(x.value=S(t).add(1,"day").format(),M(t)>=M(o.value)&&k.value.clearValue(),(M(t)>=M(o.value)||!o.value)&&k.value.openMenu())},W=(t,o,k)=>{M(t)&&!o.value&&k.value.openMenu()};E(m,(t,o)=>{Q(t,p,z,q)}),E(p,(t,o)=>{W(t,m,j)}),E(_,(t,o)=>{Q(t,v,O,B)}),E(v,(t,o)=>{W(t,_,J)});const X=()=>{f.value=="single"?(l.value.use_limit_dummy=l.value.use_limit,l.value.use_limit=""):l.value.use_limit=l.value.use_limit_dummy},Z=()=>{P.get("/api/home-types").then(t=>{t.data.status&&(K.value=t.data.data)}).catch(t=>{console.log(t)})},F=t=>{b.value=t?[]:b.value,P.get("/api/get/property/by/propertyTypes",{params:{ids:JSON.stringify(w.value)}}).then(o=>{o.data.status&&(H.value=o.data.data)}).catch(o=>{console.log(o)})},te=()=>{C.params.id?(T.value=!0,P.get(`/api/coupon/code/show/${C.params.id}`).then(t=>{t.data.status&&(l.value=t.data.data,m.value=l.value.start_date,p.value=l.value.end_date,G.value=l.value.is_offer_valid_only_for_first_time,f.value=l.value.user_type,g.value=l.value.discount_type,h.value=l.value.generated_coupon_code_by,_.value=l.value.stay_date_from,v.value=l.value.stay_date_to,w.value=l.value.property_type_id,b.value=l.value.property_id,ue(()=>{Z(),F()}),setTimeout(()=>{T.value=!1},400))}).catch(t=>{A(t.response.data.message,"error").show(),T.value=!1})):(Z(),F())},le=t=>{Y.value=!0,ae.value="api/coupon/code/save",P.post("/api/coupon/code/save",{title:t.coupon_title,start_date:S(m.value).format("YYYY-MM-DD"),end_date:S(p.value).format("YYYY-MM-DD"),is_offer_valid_only_for_first_time:G.value,user_type:f.value.toLowerCase(),use_limit:t.people_use_limit,discount_type:g.value.toLowerCase(),discount:t.discount_amount,generated_coupon_code_by:h.value.toLowerCase(),coupon_code:t.coupon_code,no_of_coupon_codes:t.no_of_codes,coupon_valid_on_min_no_of_nights:t.no_of_nights,coupon_min_days_before_check_in:t.min_days_before_check_in,stay_date_from:S(_.value).format("YYYY-MM-DD"),stay_date_to:S(v.value).format("YYYY-MM-DD"),property_type_id:w.value,property_id:b.value,term_and_conditions:t.terms_and_conditions,id:C.params.id,prefix:t.prefix}).then(o=>{o.data.status&&(A(o.data.message,"success").show(),setTimeout(()=>{Y.value=!1,oe.push({name:"list-coupon"})},400))}).catch(o=>{A(o.response.data.message,"error").show(),Y.value=!1})};return de(()=>{te()}),(t,o)=>{const k=ee("router-link"),x=ee("DatePicker");return c(),D("div",pe,[e("div",_e,[e("div",ve,[e("div",fe,[e("h1",ye,ie(s(C).params.id?"Modify Coupon":"Add Coupon"),1)]),e("div",ge,[n(k,{to:{name:"list-coupon"},class:"btn rounded-pill btn-secondary-light"},{default:y(()=>[he,r(" Manage ")]),_:1})])])]),e("section",Ve,[T.value?(c(),D("div",be,xe)):(c(),D("div",De,[n(s(re),{action:"",onSubmit:le},{default:y(({errors:u})=>[e("div",Ue,[e("div",Se,[e("div",we,[e("div",Me,[e("div",Ce,[Te,n(s(i),{type:"text",name:"coupon_title",class:U(["form-control",{"border-danger":u.coupon_title}]),modelValue:l.value.title,"onUpdate:modelValue":o[0]||(o[0]=a=>l.value.title=a),rules:"required"},null,8,["class","modelValue"])])]),e("div",Ye,[e("div",Ee,[Pe,n(s(i),{name:"start-date",modelValue:m.value,"onUpdate:modelValue":o[2]||(o[2]=a=>m.value=a),rules:"required"},{default:y(({field:a})=>[n(x,R({ref_key:"startDateRef",ref:j},a,{modelValue:m.value,"onUpdate:modelValue":o[1]||(o[1]=V=>m.value=V),format:s(L),"enable-time-picker":!1,"min-date":new Date,"input-class-name":`form-control ${u["start-date"]?"border-danger":""}`,"prevent-min-max-navigation":"","auto-apply":""}),null,16,["modelValue","format","min-date","input-class-name"])]),_:2},1032,["modelValue"])])]),e("div",Re,[e("div",Le,[qe,n(s(i),{name:"end-date",modelValue:p.value,"onUpdate:modelValue":o[4]||(o[4]=a=>p.value=a),rules:"required"},{default:y(({field:a})=>[n(x,R({ref_key:"endDateRef",ref:z},a,{modelValue:p.value,"onUpdate:modelValue":o[3]||(o[3]=V=>p.value=V),format:s(L),"enable-time-picker":!1,"min-date":q.value,"start-date":q.value,"input-class-name":`form-control ${u["end-date"]?"border-danger":""}`,"prevent-min-max-navigation":"","auto-apply":""}),null,16,["modelValue","format","min-date","start-date","input-class-name"])]),_:2},1032,["modelValue"])])]),e("div",Be,[e("div",Fe,[Ae,e("div",Ne,[e("div",$e,[e("div",Ie,[n(s(i),{type:"radio",class:"form-check-input",name:"use_type",id:"r-single",value:"single",modelValue:f.value,"onUpdate:modelValue":o[5]||(o[5]=a=>f.value=a),onChange:X},null,8,["modelValue"]),je])]),e("div",ze,[e("div",Je,[n(s(i),{type:"radio",class:"form-check-input",name:"use_type",id:"r-multiple",value:"multiple",modelValue:f.value,"onUpdate:modelValue":o[6]||(o[6]=a=>f.value=a),onChange:X},null,8,["modelValue"]),Oe])]),e("div",Ge,[n(s(i),{type:"number",class:"form-control",name:"people_use_limit",placeholder:"People Use Limit",disabled:f.value!="multiple",modelValue:l.value.use_limit,"onUpdate:modelValue":o[7]||(o[7]=a=>l.value.use_limit=a)},null,8,["disabled","modelValue"])])]),Ke])]),e("div",He,[e("div",Qe,[We,e("div",Xe,[e("div",Ze,[e("div",eo,[n(s(i),{type:"radio",class:"form-check-input",name:"discount_type",id:"r-percentage",value:"percentage",modelValue:g.value,"onUpdate:modelValue":o[8]||(o[8]=a=>g.value=a)},null,8,["modelValue"]),oo])]),e("div",ao,[e("div",to,[n(s(i),{type:"radio",class:"form-check-input",name:"discount_type",id:"r-flat",value:"flat",modelValue:g.value,"onUpdate:modelValue":o[9]||(o[9]=a=>g.value=a)},null,8,["modelValue"]),lo])]),e("div",so,[g.value=="percentage"?(c(),N(s(i),{key:0,type:"number",name:"discount_amount",class:U(["form-control",{"border-danger":u.discount_amount}]),placeholder:"Discount percentage",modelValue:l.value.discount_percentage,"onUpdate:modelValue":o[10]||(o[10]=a=>l.value.discount_percentage=a),rules:"required"},null,8,["class","modelValue"])):(c(),N(s(i),{key:1,type:"number",name:"discount_amount",class:U(["form-control",{"border-danger":u.discount_amount}]),placeholder:"Discount Amount",modelValue:l.value.discount_flat,"onUpdate:modelValue":o[11]||(o[11]=a=>l.value.discount_flat=a),rules:"required"},null,8,["class","modelValue"]))])])])]),e("div",no,[e("div",io,[uo,e("div",ro,[e("div",co,[e("div",mo,[n(s(i),{type:"radio",class:"form-check-input",name:"generated_by",id:"r-self",value:"self",modelValue:h.value,"onUpdate:modelValue":o[12]||(o[12]=a=>h.value=a)},null,8,["modelValue"]),po])]),e("div",_o,[e("div",vo,[n(s(i),{type:"radio",class:"form-check-input",name:"generated_by",id:"r-auto",value:"auto",modelValue:h.value,"onUpdate:modelValue":o[13]||(o[13]=a=>h.value=a)},null,8,["modelValue"]),fo])]),e("div",yo,[h.value=="self"?(c(),N(s(i),{key:0,type:"text",name:"coupon_code",class:U(["form-control",{"border-danger":u.coupon_code}]),placeholder:"Code",modelValue:l.value.coupon_code_self,"onUpdate:modelValue":o[14]||(o[14]=a=>l.value.coupon_code_self=a),rules:"required"},null,8,["class","modelValue"])):(c(),D("div",go,[e("div",ho,[n(s(i),{type:"text",name:"prefix",class:U(["form-control",{"border-danger":u.prefix}]),placeholder:"Prefix",modelValue:l.value.prefix,"onUpdate:modelValue":o[15]||(o[15]=a=>l.value.prefix=a),rules:"required"},null,8,["class","modelValue"])]),e("div",Vo,[n(s(i),{type:"number",name:"no_of_codes",class:U(["form-control",{"border-danger":u.no_of_codes}]),placeholder:"No of Codes",modelValue:l.value.coupon_code_auto,"onUpdate:modelValue":o[16]||(o[16]=a=>l.value.coupon_code_auto=a),rules:"required"},null,8,["class","modelValue"])])]))])])])]),e("div",bo,[e("div",ko,[xo,e("div",Do,[e("div",Uo,[n(s(i),{name:"coupon-stay-start-date",modelValue:_.value,"onUpdate:modelValue":o[18]||(o[18]=a=>_.value=a),rules:"required"},{default:y(({field:a})=>[n(x,R({ref_key:"couponStayStartDateRef",ref:J},a,{modelValue:_.value,"onUpdate:modelValue":o[17]||(o[17]=V=>_.value=V),format:s(L),"enable-time-picker":!1,"min-date":new Date,"input-class-name":`form-control ${u["coupon-stay-start-date"]?"border-danger":""}`,placeholder:"Start Date","prevent-min-max-navigation":"","auto-apply":""}),null,16,["modelValue","format","min-date","input-class-name"])]),_:2},1032,["modelValue"])]),e("div",So,[n(s(i),{name:"coupon-stay-end-date",modelValue:v.value,"onUpdate:modelValue":o[20]||(o[20]=a=>v.value=a),rules:"required"},{default:y(({field:a})=>[n(x,R({ref_key:"couponStayEndDateRef",ref:O},a,{modelValue:v.value,"onUpdate:modelValue":o[19]||(o[19]=V=>v.value=V),format:s(L),"enable-time-picker":!1,"min-date":B.value,"start-date":B.value,"input-class-name":`form-control ${u["coupon-stay-end-date"]?"border-danger":""}`,placeholder:"End Date","prevent-min-max-navigation":"","auto-apply":""}),null,16,["modelValue","format","min-date","start-date","input-class-name"])]),_:2},1032,["modelValue"])])])])]),e("div",wo,[e("div",Mo,[Co,n(s(i),{as:"div",name:"property_type",class:"dropdown form-multiselect"},{default:y(()=>[n(s($),{items:K.value,"item-name":"name","item-id":"id",name:"ckb-pt",placeholder:"Select Property Type",modelValue:w.value,"onUpdate:modelValue":o[21]||(o[21]=a=>w.value=a),onEmitChange:F},null,8,["items","modelValue"])]),_:1})])]),e("div",To,[e("div",Yo,[Eo,n(s(i),{as:"div",name:"property_name",class:"dropdown form-multiselect"},{default:y(()=>[n(s($),{items:H.value,"item-name":"home_name","item-id":"id",name:"ckb-pn",placeholder:"Select Property",modelValue:b.value,"onUpdate:modelValue":o[22]||(o[22]=a=>b.value=a)},null,8,["items","modelValue"])]),_:1})])])])])]),e("div",Po,[e("div",Ro,[e("div",Lo,[e("button",qo,[Y.value?(c(),D("div",Bo)):(c(),D("span",Fo,"SUBMIT"))])])])])]),_:1})]))])])}}};export{zo as default};
