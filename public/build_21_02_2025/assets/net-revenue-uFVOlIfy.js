import{u as ee,z as te,r as a,A as oe,p as se,o as ae,B as le,a as l,c as n,b as e,C as y,D as k,G as b,H as P,d as L,w as ne,e as N,O as ie,E as T,K as i,I as ce,f as C,L as re,F as ue,P as de}from"./app-Bv7sA21o.js";import{s as A,c as E,a as z}from"./common-iZsm-le3.js";import{P as ve}from"./paginationAnalytics-cNOIctNY.js";import"./dayjs.min-CU4dOPv8.js";const pe={class:"page-wrap dashboard-wrap"},_e={class:"page-title"},he={class:"row gy-3 align-items-center justify-content-xl-end"},me=e("div",{class:"col-12"},[e("div",{class:"row gy-3"},[e("div",{class:"col align-self-end"},[e("h1",{class:"h2 mb-0"},"Net Revenue")])])],-1),ge={class:"col-12"},ye={class:"search-filter"},be={class:"row gy-3 gx-2"},fe={class:"col-auto position-relative"},xe={class:"row justify-content-xl-end gy-3 gx-2"},we={class:"col-12 col-lg col-xl-auto"},ke={class:"form-group mb-0"},Pe=e("option",{selected:"",disabled:"",value:""},"Property Name",-1),Ce=["value"],De={class:"col-6 col-lg col-xl-auto"},Le={class:"form-group mb-0"},Ne=e("option",{selected:"",disabled:"",value:""},"Location",-1),Ve=["value"],Fe={class:"col-6 col-lg col-xl-auto"},Re={class:"form-group mb-0"},Ue=e("option",{selected:"",disabled:"",value:""},"Channel",-1),Be=["value"],Se={class:"col-12 col-lg col-xl-auto"},je={class:"row gy-3 gx-2"},$e={class:"col"},Me={class:"col-12 col-md-auto"},Te={class:"btn-group gap-1"},Ae=e("span",{class:"bi bi-search"},null,-1),Ee=[Ae],ze=e("span",{class:"bi bi-arrow-clockwise"},null,-1),Ge=[ze],He={class:"col-auto ms-xxl-auto"},Ie=de('<option value="" disabled selected>Select days</option><option value="7_next">Next 7 days</option><option value="7">Last 7 days</option><option value="30">Last 30 days</option><option value="60">Last 60 days</option><option value="90">Last 90 days</option>',6),Ke=[Ie],Oe={class:"section"},We={class:"outer-wrapper"},qe={key:0,class:"d-flex justify-content-center align-items-center h-100 py-5"},Je=e("div",{class:"spinner-border",role:"status"},null,-1),Qe=[Je],Xe={key:1,class:"table-wrap"},Ye={class:"table-responsive"},Ze={class:"table table-list-2 align-middle mb-0"},et=e("thead",null,[e("tr",null,[e("th",{width:"150",class:"bg-primary text-white"},"Booking Date"),e("th",{class:"bg-primary text-white"},"Location"),e("th",{class:"bg-primary text-white"},"Property Name"),e("th",{class:"bg-primary text-white"},"Channel"),e("th",{class:"bg-primary text-white text-end"},"Revenue")])],-1),tt={nowrap:""},ot=e("i",{class:"bi bi-calendar2-check"},null,-1),st={nowrap:""},at={nowrap:""},lt={class:"text-end"},nt={class:"text-black"},it={key:2,class:"py-5 px-3"},ct={key:0,class:"card card-chartBox bg-transparent"},rt={class:"card-body p-2"},ut={class:"row g-3 justify-content-end align-items-center"},dt={class:"col"},vt={class:"col-auto"},pt={class:"text-primary m-0"},_t=e("span",{class:"text-dark"},"Net Revenue:",-1),ft={__name:"net-revenue",setup(ht){const v=ee();te();const u=a({total:0,per_page:50,current_page:1,last_page:0}),f=a([]),x=a(1),V=a(0),w=a(!0),p=a("30"),F=a([]),_=a(""),R=a([]),h=a(""),U=a([]),m=a(""),D=a(""),c=a(),r=a(),d=a(),G=a();a();const H=oe(()=>({page:x.value||null,days:c.value?"":p.value||"30",property_id:_.value||null,location_id:h.value||null,channel:m.value||null,type:D.value||null,from_date:c.value&&A(c.value)||null,to_date:d.value&&A(d.value)||null}));se(r,(o,s)=>{o&&(c.value=o[0],d.value=o[1])});const I=o=>`${z(o[0])} - ${z(o[1])}`,K=()=>{r.value="",c.value="",d.value=""},O=o=>{r.value="",c.value="",d.value="",g()},W=()=>{C.get("api/dashboard/property").then(o=>{o.data.status&&(F.value=o.data.property)}).catch(o=>{})},q=()=>{C.get("api/dashboard/location").then(o=>{o.data.status&&(R.value=o.data.location)}).catch(o=>{})},J=()=>{C.get("api/dashboard/channel").then(o=>{o.data.status&&(U.value=o.data.channel)}).catch(o=>{})},Q=()=>{c.value&&(p.value=""),g()},X=()=>{x.value=1,r.value="",_.value="",h.value="",m.value="",c.value="",d.value="",D.value="",g()},g=o=>{w.value=!0,console.log("page",o),x.value=o||1,C.post("api/net-revenue",H.value).then(s=>{s.data.status&&(f.value=s.data.data,V.value=s.data.net_revenue,u.value=s.data.pagination,u.value.current_page=x.value||1,w.value=!1)}).catch(s=>{})};return ae(()=>{p.value=v.options.history.state.days||"30",h.value=v.options.history.state.location||"",D.value=v.options.history.state.type||null,m.value=v.options.history.state.channel||"",_.value=v.options.history.state.property_id||"",W(),q(),J(),g()}),(o,s)=>{var B,S,j,$,M;const Y=le("DatePicker");return l(),n(b,null,[e("div",pe,[e("div",_e,[e("div",he,[me,e("div",ge,[e("div",ye,[e("div",be,[e("div",fe,[e("div",xe,[e("div",we,[e("div",ke,[y(e("select",{class:"form-control",name:"property_name","onUpdate:modelValue":s[0]||(s[0]=t=>_.value=t),onChange:s[1]||(s[1]=(...t)=>o.onPropertyChange&&o.onPropertyChange(...t)),style:{"min-width":"250px"}},[Pe,(l(!0),n(b,null,P(F.value,t=>(l(),n("option",{value:t.id},i(t.property_name),9,Ce))),256))],544),[[k,_.value]])])]),e("div",De,[e("div",Le,[y(e("select",{class:"form-control",name:"channel","onUpdate:modelValue":s[2]||(s[2]=t=>h.value=t)},[Ne,(l(!0),n(b,null,P(R.value,t=>(l(),n("option",{value:t.location_id},i(t.location_name),9,Ve))),256))],512),[[k,h.value]])])]),e("div",Fe,[e("div",Re,[y(e("select",{class:"form-control",name:"channel","onUpdate:modelValue":s[3]||(s[3]=t=>m.value=t)},[Ue,(l(!0),n(b,null,P(U.value,t=>(l(),n("option",{value:t},i(t),9,Be))),256))],512),[[k,m.value]])])]),e("div",Se,[e("div",je,[e("div",$e,[L(N(ue),{name:"from-date",modelValue:r.value,"onUpdate:modelValue":s[5]||(s[5]=t=>r.value=t)},{default:ne(({field:t})=>[L(Y,re({ref_key:"fromDateRef",ref:G},t,{modelValue:r.value,"onUpdate:modelValue":s[4]||(s[4]=Z=>r.value=Z),format:I,range:"","enable-time-picker":!1,"input-class-name":"form-control",placeholder:"From - To",onCleared:K,"auto-apply":"",style:{"min-width":"240px"}}),null,16,["modelValue"])]),_:1},8,["modelValue"])])])]),e("div",Me,[e("div",Te,[e("button",{class:"btn btn-primary btn-icon",onClick:s[6]||(s[6]=t=>Q())},Ee),e("button",{class:"btn btn-icon btn-clear btn-warning",onClick:s[7]||(s[7]=t=>X())},Ge)])])])]),e("div",He,[y(e("select",{class:"form-control","onUpdate:modelValue":s[8]||(s[8]=t=>p.value=t),onChange:O},Ke,544),[[k,p.value]])])])])])])]),e("section",Oe,[e("div",We,[w.value?(l(),n("div",qe,Qe)):f.value.length?(l(),n("div",Xe,[e("div",Ye,[e("table",Ze,[et,(l(!0),n(b,null,P(f.value,t=>(l(),n("tbody",{key:t.id},[e("tr",null,[e("td",tt,[e("b",null,[ot,T(" "+i(t==null?void 0:t.checkin_date),1)])]),e("td",st,i(t==null?void 0:t.location),1),e("td",at,i(t==null?void 0:t.property_name),1),e("td",null,i(t==null?void 0:t.channel),1),e("td",lt,[e("b",nt,"₹"+i(N(E)(t==null?void 0:t.revenue)),1)])])]))),128))])])])):(l(),n("div",it," No Data Found...! "))])])]),!w.value&&f.value.length?(l(),n("div",ct,[e("div",rt,[e("div",ut,[e("div",dt,[y(L(ve,{total:(B=u.value)==null?void 0:B.total,perPage:(S=u.value)==null?void 0:S.per_page,currentPage:(j=u.value)==null?void 0:j.current_page,lastPage:($=u.value)==null?void 0:$.last_page,"onUpdate:currentPage":g},null,8,["total","perPage","currentPage","lastPage"]),[[ie,((M=u.value)==null?void 0:M.last_page)>1]])]),e("div",vt,[e("h4",pt,[_t,T(),e("b",null,"₹"+i(N(E)(V.value)),1)])])])])])):ce("",!0)],64)}}};export{ft as default};
