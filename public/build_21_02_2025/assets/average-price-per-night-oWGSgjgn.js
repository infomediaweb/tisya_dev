import{u as M,r as l,A as U,o as E,a,c as n,b as e,C as g,D as N,G as h,H as C,O as R,d as $,E as G,K as v,e as L,I as H,f as D,P as I}from"./app-Bv7sA21o.js";import{c as V}from"./common-iZsm-le3.js";import{P as K}from"./paginationAnalytics-cNOIctNY.js";import"./dayjs.min-CU4dOPv8.js";const O={class:"page-wrap dashboard-wrap"},T={class:"page-title"},W={class:"row gy-3 align-items-center justify-content-xl-end"},q=e("div",{class:"col"},[e("div",{class:"row gy-3"},[e("div",{class:"col align-self-end"},[e("h1",{class:"h2 mb-0"},"Average Price Per Night")])])],-1),z={class:"col-auto"},J={class:"search-filter"},Q={class:"row gy-3 gx-2"},X={class:"col-auto position-relative"},Y={class:"row justify-content-xl-end gy-3 gx-2"},Z={class:"col-12 col-lg col-xl-auto"},ee={class:"form-group mb-0"},te=e("option",{selected:"",disabled:"",value:""},"Property Name",-1),se=["value"],oe={class:"col-12 col-md-auto"},ae={class:"btn-group gap-1"},ne=e("span",{class:"bi bi-search"},null,-1),le=[ne],ie=e("span",{class:"bi bi-arrow-clockwise"},null,-1),re=[ie],ce={class:"col-auto ms-xxl-auto"},de=I('<option value="" disabled selected>Select days</option><option value="7_next">Next 7 days</option><option value="7">Last 7 days</option><option value="30">Last 30 days</option><option value="60">Last 60 days</option><option value="90">Last 90 days</option>',6),ue=[de],pe={class:"section"},_e={class:"outer-wrapper"},ve={key:0,class:"d-flex justify-content-center align-items-center h-100 py-5"},ge=e("div",{class:"spinner-border",role:"status"},null,-1),he=[ge],ye={key:1,class:"table-wrap"},me={class:"table-responsive"},be={class:"table table-list-2 align-middle mb-0"},fe=e("thead",null,[e("tr",null,[e("th",{class:"bg-primary text-white"},"Property Name"),e("th",{class:"bg-primary text-white text-end"},"Average Price")])],-1),xe={nowrap:""},Pe={class:"text-end"},we={class:"text-black"},ke={key:2,class:"py-5 px-3"},Ne={key:0,class:"card card-chartBox bg-transparent"},Ce={class:"card-body p-2"},Le={class:"row g-3 justify-content-end align-items-center"},De={class:"col"},Ve={class:"col-auto"},Ae={class:"text-primary m-0"},Se=e("span",{class:"text-dark"},"Average Price:",-1),Ee={__name:"average-price-per-night",setup(je){const y=M(),i=l({total:0,per_page:50,current_page:1,last_page:0}),r=l([]),p=l(1),m=l(0),_=l(!0),c=l("30"),b=l([]),d=l(""),A=U(()=>({page:p.value||null,days:c.value||"30",property_id:d.value||null})),S=o=>{u()},j=()=>{D.get("api/dashboard/property").then(o=>{o.data.status&&(b.value=o.data.property)}).catch(o=>{})},B=()=>{u()},F=()=>{p.value=1,c.value="30",d.value="",u()},u=o=>{_.value=!0,console.log("page",o),p.value=o||1,D.post("api/average-price-per-night",A.value).then(s=>{s.status&&(console.log("average",s.data),r.value=s.data.data,m.value=s.data.total_average_price,i.value=s.data.pagination,i.value.current_page=p.value||1,console.log("data",r.value),_.value=!1)}).catch(s=>{})};return E(()=>{c.value=y.options.history.state.days||"30",d.value=y.options.history.state.property_id||"",j(),u()}),(o,s)=>{var f,x,P,w,k;return a(),n(h,null,[e("div",O,[e("div",T,[e("div",W,[q,e("div",z,[e("div",J,[e("div",Q,[e("div",X,[e("div",Y,[e("div",Z,[e("div",ee,[g(e("select",{class:"form-control",name:"property_name","onUpdate:modelValue":s[0]||(s[0]=t=>d.value=t),onChange:s[1]||(s[1]=(...t)=>o.onPropertyChange&&o.onPropertyChange(...t)),style:{"min-width":"250px"}},[te,(a(!0),n(h,null,C(b.value,t=>(a(),n("option",{value:t.id},v(t.property_name),9,se))),256))],544),[[N,d.value]])])]),e("div",oe,[e("div",ae,[e("button",{class:"btn btn-primary btn-icon",onClick:s[2]||(s[2]=t=>B())},le),e("button",{class:"btn btn-icon btn-clear btn-warning",onClick:s[3]||(s[3]=t=>F())},re)])])])]),e("div",ce,[g(e("select",{class:"form-control","onUpdate:modelValue":s[4]||(s[4]=t=>c.value=t),onChange:S},ue,544),[[N,c.value]])])])])])])]),e("section",pe,[e("div",_e,[_.value?(a(),n("div",ve,he)):r.value.length?(a(),n("div",ye,[e("div",me,[e("table",be,[fe,(a(!0),n(h,null,C(r.value,t=>(a(),n("tbody",{key:t.id},[e("tr",null,[e("td",xe,v(t==null?void 0:t.property_name),1),e("td",Pe,[e("b",we,"₹"+v(L(V)(t==null?void 0:t.average_price_per_night)),1)])])]))),128))])])])):(a(),n("div",ke," No Data Found...! "))])])]),!_.value&&r.value.length?(a(),n("div",Ne,[e("div",Ce,[e("div",Le,[e("div",De,[g($(K,{total:(f=i.value)==null?void 0:f.total,perPage:(x=i.value)==null?void 0:x.per_page,currentPage:(P=i.value)==null?void 0:P.current_page,lastPage:(w=i.value)==null?void 0:w.last_page,"onUpdate:currentPage":u},null,8,["total","perPage","currentPage","lastPage"]),[[R,((k=i.value)==null?void 0:k.last_page)>1]])]),e("div",Ve,[e("h4",Ae,[Se,G(),e("b",null,"₹"+v(L(V)(m.value)),1)])])])])])):H("",!0)],64)}}};export{Ee as default};
