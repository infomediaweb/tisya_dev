import{u as $,r as l,A as H,o as I,a,c as n,b as t,C as v,D as b,G as h,H as f,O as K,d as O,E as W,K as i,e as U,I as q,f as x,P as z}from"./app-Bv7sA21o.js";import{c as j}from"./common-iZsm-le3.js";import{P as J}from"./paginationAnalytics-cNOIctNY.js";import"./dayjs.min-CU4dOPv8.js";const Q={class:"page-wrap dashboard-wrap"},X={class:"page-title"},Y={class:"row gy-3 align-items-center justify-content-xl-end"},Z=t("div",{class:"col"},[t("div",{class:"row gy-3"},[t("div",{class:"col align-self-end"},[t("h1",{class:"h2 mb-0"},"Bookings Created")])])],-1),tt={class:"col-auto"},et={class:"search-filter"},ot={class:"row gy-3 gx-2"},st={class:"col-auto position-relative"},at={class:"row justify-content-xl-end gy-3 gx-2"},nt={class:"col-12 col-lg col-xl-auto"},lt={class:"form-group mb-0"},it=t("option",{selected:"",disabled:"",value:""},"Property Name",-1),ct=["value"],rt={class:"col-6 col-lg col-xl-auto"},dt={class:"form-group mb-0"},ut=t("option",{selected:"",disabled:"",value:""},"Location",-1),_t=["value"],pt={class:"col-6 col-lg col-xl-auto"},vt={class:"form-group mb-0"},ht=t("option",{selected:"",disabled:"",value:""},"Channel",-1),gt=["value"],mt={class:"col-12 col-md-auto"},yt={class:"btn-group gap-1"},bt=t("span",{class:"bi bi-search"},null,-1),ft=[bt],xt=t("span",{class:"bi bi-arrow-clockwise"},null,-1),wt=[xt],kt={class:"col-auto ms-xxl-auto"},Pt=z('<option value="" disabled selected>Select days</option><option value="7_next">Next 7 days</option><option value="7">Last 7 days</option><option value="30">Last 30 days</option><option value="60">Last 60 days</option><option value="90">Last 90 days</option>',6),Ct=[Pt],Lt={class:"section"},Nt={class:"outer-wrapper"},Vt={key:0,class:"d-flex justify-content-center align-items-center h-100 py-5"},Dt=t("div",{class:"spinner-border",role:"status"},null,-1),Bt=[Dt],St={key:1,class:"table-wrap"},Ut={class:"table-responsive"},jt={class:"table table-list-2 align-middle mb-0"},Ft=t("thead",null,[t("tr",null,[t("th",{class:"bg-primary text-white"},"Location"),t("th",{class:"bg-primary text-white"},"Property Name"),t("th",{class:"bg-primary text-white"},"Channel"),t("th",{class:"bg-primary text-white text-end"},"Amount")])],-1),At={nowrap:""},Mt={nowrap:""},Tt={nowrap:""},Et={class:"text-end"},Gt={class:"text-black"},Rt={key:2,class:"py-5 px-3"},$t={key:0,class:"card card-chartBox bg-transparent"},Ht={class:"card-body p-2"},It={class:"row g-3 justify-content-end align-items-center"},Kt={class:"col"},Ot={class:"col-auto"},Wt={class:"text-primary m-0"},qt=t("span",{class:"text-dark"},"Grand Total:",-1),Zt={__name:"bookings-created",setup(zt){const w=$(),c=l({total:0,per_page:50,current_page:1,last_page:0}),r=l([]),g=l(1),k=l(0),m=l(!0),d=l("30"),P=l([]),u=l(""),C=l([]),_=l(""),L=l([]),y=l(""),F=H(()=>({page:g.value||null,days:d.value||"30",property_id:u.value||null,location_id:_.value||null,channel:y.value||null})),A=s=>{p()},M=()=>{x.get("api/dashboard/location").then(s=>{s.data.status&&(C.value=s.data.location)}).catch(s=>{})},T=()=>{x.get("api/dashboard/property").then(s=>{s.data.status&&(P.value=s.data.property)}).catch(s=>{})},E=()=>{x.get("api/dashboard/channel").then(s=>{s.data.status&&(L.value=s.data.channel)}).catch(s=>{})},G=()=>{p()},R=()=>{g.value=1,d.value="30",u.value="",_.value="",y.value="",p()},p=s=>{m.value=!0,console.log("page",s),g.value=s||1,x.post("api/bookings-created",F.value).then(o=>{o.status&&(console.log("average",o.data),r.value=o.data.data,k.value=o.data.grand_total,c.value=o.data.pagination,c.value.current_page=g.value||1,console.log("data",r.value),m.value=!1)}).catch(o=>{})};return I(()=>{d.value=w.options.history.state.days,_.value=w.options.history.state.location||"",u.value=w.options.history.state.property_id||"",M(),E(),T(),p()}),(s,o)=>{var N,V,D,B,S;return a(),n(h,null,[t("div",Q,[t("div",X,[t("div",Y,[Z,t("div",tt,[t("div",et,[t("div",ot,[t("div",st,[t("div",at,[t("div",nt,[t("div",lt,[v(t("select",{class:"form-control",name:"property_name","onUpdate:modelValue":o[0]||(o[0]=e=>u.value=e),onChange:o[1]||(o[1]=(...e)=>s.onPropertyChange&&s.onPropertyChange(...e)),style:{"min-width":"250px"}},[it,(a(!0),n(h,null,f(P.value,e=>(a(),n("option",{value:e.id},i(e.property_name),9,ct))),256))],544),[[b,u.value]])])]),t("div",rt,[t("div",dt,[v(t("select",{class:"form-control",name:"channel","onUpdate:modelValue":o[2]||(o[2]=e=>_.value=e)},[ut,(a(!0),n(h,null,f(C.value,e=>(a(),n("option",{value:e.location_id},i(e.location_name),9,_t))),256))],512),[[b,_.value]])])]),t("div",pt,[t("div",vt,[v(t("select",{class:"form-control",name:"channel","onUpdate:modelValue":o[3]||(o[3]=e=>y.value=e)},[ht,(a(!0),n(h,null,f(L.value,e=>(a(),n("option",{value:e},i(e),9,gt))),256))],512),[[b,y.value]])])]),t("div",mt,[t("div",yt,[t("button",{class:"btn btn-primary btn-icon",onClick:o[4]||(o[4]=e=>G())},ft),t("button",{class:"btn btn-icon btn-clear btn-warning",onClick:o[5]||(o[5]=e=>R())},wt)])])])]),t("div",kt,[v(t("select",{class:"form-control","onUpdate:modelValue":o[6]||(o[6]=e=>d.value=e),onChange:A},Ct,544),[[b,d.value]])])])])])])]),t("section",Lt,[t("div",Nt,[m.value?(a(),n("div",Vt,Bt)):r.value.length?(a(),n("div",St,[t("div",Ut,[t("table",jt,[Ft,(a(!0),n(h,null,f(r.value,e=>(a(),n("tbody",{key:e.id},[t("tr",null,[t("td",At,i(e==null?void 0:e.location_name),1),t("td",Mt,i(e==null?void 0:e.property_name),1),t("td",Tt,i(e==null?void 0:e.channel),1),t("td",Et,[t("b",Gt,"₹"+i(U(j)(e==null?void 0:e.total_amount)),1)])])]))),128))])])])):(a(),n("div",Rt," No Data Found...! "))])])]),!m.value&&r.value.length?(a(),n("div",$t,[t("div",Ht,[t("div",It,[t("div",Kt,[v(O(J,{total:(N=c.value)==null?void 0:N.total,perPage:(V=c.value)==null?void 0:V.per_page,currentPage:(D=c.value)==null?void 0:D.current_page,lastPage:(B=c.value)==null?void 0:B.last_page,"onUpdate:currentPage":p},null,8,["total","perPage","currentPage","lastPage"]),[[K,((S=c.value)==null?void 0:S.last_page)>1]])]),t("div",Ot,[t("h4",Wt,[qt,W(),t("b",null,"₹"+i(U(j)(k.value)),1)])])])])])):q("",!0)],64)}}};export{Zt as default};
