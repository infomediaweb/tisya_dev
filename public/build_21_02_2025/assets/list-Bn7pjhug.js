import{r,p as V,o as F,B as I,a as n,c as d,b as e,C as k,N as R,e as g,Z as U,d as w,w as y,G as N,X as A,f as h,t as m,E as $,H as q,K as x,x as D}from"./app-Bv7sA21o.js";import{p as G}from"./no-img-x9zeKCez.js";import"./dayjs.min-CU4dOPv8.js";import{V as H}from"./vue-draggable-next.esm-bundler-C6HHcIkS.js";import{u as K}from"./debouncedRef-B_9CytHk.js";import{f as Q}from"./common-iZsm-le3.js";import{d as L}from"./modal-WLjbOo64.js";const X={class:"page-wrap properties-page"},Z={class:"page-title mb-4"},z={class:"row gy-3 align-items-center"},J=e("div",{class:"col align-self-end"},[e("h1",{class:"h2 mb-0"},"Special Offers List")],-1),P={class:"col-lg-4"},W={action:""},Y={class:"input-group input-icon"},j=e("span",{class:"icon-search"},null,-1),ee={class:"col-auto"},te=e("i",{class:"bi bi-plus-lg fs-6 lh-1 me-2"},null,-1),se={class:"section"},ae={key:0,class:"d-flex justify-content-center py-5"},le=e("div",{class:"spinner-border",role:"status"},null,-1),oe=[le],ce={key:0,class:"outer-wrapper"},ie={class:"table-wrap"},ne={class:"table-responsive"},de={class:"table align-middle mb-0 mw-lg"},ue={width:"45px"},re=e("th",{width:"100px",class:"text-secondary fw-semibold"},"Image",-1),he=e("th",{class:"text-secondary fw-semibold",style:{width:"20%"}},"Offer Name",-1),pe=e("th",{class:"text-secondary fw-semibold",style:{width:"20%"}},"Coupon Code",-1),fe=e("th",{class:"text-secondary fw-semibold"},"Valid Till",-1),_e=e("th",{class:"text-secondary fw-semibold"},"Status",-1),me=e("th",{style:{width:"90px"},class:"text-secondary fw-semibold"},"Action",-1),ve=["checked","value"],ge=["src","alt"],be={class:"form-check form-switch"},ke=["checked","onChange"],we={class:"action-btn-group mb-0 mw-0"},ye=e("i",{class:"bi bi-pencil-square"},null,-1),xe=["onClick"],Ce=e("i",{class:"icon-bi bi-trash"},null,-1),Se=[Ce],Ve={class:"table-footer pt-3"},Ne={class:"row align-items-center"},Ae={class:"col-auto"},De=["disabled"],Le={key:1,class:"message text-center"},Oe=e("h6",{class:"fw-bold"},"No Record Found",-1),Te=[Oe],qe={__name:"list",setup(Be){const i=r([]),p=r(!1),c=r(!1),o=r([]),f=r(),_=K("",800),u=r(!1),b=l=>{u.value=!0,h.get("/api/special-invitation",{params:{page:l,search:_.value}}).then(t=>{t.data.status&&(i.value=t.data.data,setTimeout(()=>{c.value=!1,p.value=!1,o.value=[],u.value=!1},400))}).catch(t=>{u.value=!1})};V(_,(l,t)=>{u.value=!0,h.get("/api/special-invitation",{params:{search:l}}).then(s=>{s.data.status&&(i.value=s.data.data,setTimeout(()=>{c.value=!1,p.value=!1,o.value=[],u.value=!1},200))}).catch(s=>{console.log(s)})});const O=()=>{c.value?(p.value=!0,o.value=[],f.value.forEach(l=>{o.value.push(l.value)})):(p.value=!1,o.value=[])};V(o,(l,t)=>{var s;l.length!=((s=f==null?void 0:f.value)==null?void 0:s.length)?c.value=!1:l.length&&(c.value=!0)});const T=l=>{L("Are you sure you want to delete?",t).show();function t(){h.get(`/api/special-invitation-delete-record/${l}`).then(s=>{s.data.status&&(m(s.data.message,"success").show(),D(()=>{b()}))}).catch(s=>{console.log(s)})}},B=()=>{L("Are you sure you want to delete?",l).show();function l(){h.post("/api/special-invitation-delete-multiple-record",{ids:o.value}).then(t=>{t.data.status&&(m(t.data.message,"success").show(),D(()=>{b()}))}).catch(t=>{console.log(t)})}},M=(l,{target:t},s)=>{h.post(`/api/special-invitation-update-status/${l}`,{status:Number(t.checked)}).then(a=>{a.data.status&&(m(a.data.message,"success").show(),i.value[s].status=Number(t.checked))}).catch(a=>{console.log(a)})},E=l=>{let t=i.value.map(s=>s.id);h.post("/api/special-invitation-save-position",{position:t}).then(s=>{s.data.status&&m(s.data.message,"success").show()}).catch(s=>{m(s.response.data.message,"error").show()})};return F(()=>{b()}),(l,t)=>{const s=I("router-link");return n(),d("div",X,[e("div",Z,[e("div",z,[J,e("div",P,[e("form",W,[e("div",Y,[j,k(e("input",{type:"text",class:"form-control form-control-sm","onUpdate:modelValue":t[0]||(t[0]=a=>U(_)?_.value=a:null),placeholder:"Search by offer name"},null,512),[[R,g(_)]])])])]),e("div",ee,[w(s,{to:{name:"add-special-offer"},class:"btn rounded-pill btn-secondary-light"},{default:y(()=>[te,$(" Add Special Offers ")]),_:1})])])]),e("section",se,[u.value?(n(),d("div",ae,oe)):(n(),d(N,{key:1},[i.value.length?(n(),d("div",ce,[e("div",ie,[e("div",ne,[e("table",de,[e("thead",null,[e("tr",null,[e("th",ue,[k(e("input",{class:"form-check-input form-check-lg mt-0",type:"checkbox","onUpdate:modelValue":t[1]||(t[1]=a=>c.value=a),onChange:O},null,544),[[A,c.value]])]),re,he,pe,fe,_e,me])]),w(g(H),{list:i.value,animation:"200","ghost-class":"td-drag",onChange:E,class:"move",filter:".form-check-input, .action-btn-group",tag:"tbody"},{default:y(()=>[(n(!0),d(N,null,q(i.value,(a,C)=>{var S;return n(),d("tr",{key:C},[e("td",null,[k(e("input",{class:"form-check-input form-check-lg mt-0",ref_for:!0,ref_key:"selectCheckRef",ref:f,checked:p.value,value:a.id,"onUpdate:modelValue":t[2]||(t[2]=v=>o.value=v),type:"checkbox"},null,8,ve),[[A,o.value]])]),e("td",null,[e("img",{src:a.image_path?a.image_path:g(G),alt:a.offer_name,height:"30"},null,8,ge)]),e("td",null,x(a.offer_name),1),e("td",null,x((S=a.coupon_code)==null?void 0:S.codes.split(",")[0].trim()),1),e("td",null,x(g(Q)(a.validity)),1),e("td",null,[e("div",be,[e("input",{class:"form-check-input",type:"checkbox",role:"switch",id:"s1",checked:a.status==1,onChange:v=>M(a.id,v,C),"true-value":"1","false-value":"0"},null,40,ke)])]),e("td",null,[e("ul",we,[e("li",null,[w(s,{to:{name:"add-special-offer",params:{id:a.id}},class:"btn ps-0 p-1 fs-5 text-black"},{default:y(()=>[ye]),_:2},1032,["to"])]),e("li",null,[e("button",{onClick:v=>T(a.id),class:"btn p-1 fs-5 text-black"},Se,8,xe)])])])])}),128))]),_:1},8,["list"])])])]),e("div",Ve,[e("div",Ne,[e("div",Ae,[e("button",{class:"btn btn-save btn-primary",onClick:B,disabled:!c.value&&o.value.length==0||o.value.length==0}," Delete Selected ",8,De)])])])])):(n(),d("div",Le,Te))],64))])])}}};export{qe as default};
