import{i as m,u as v,r as _,o as w,a as n,c as i,b as s,d as c,w as y,e as l,n as k,_ as x,f as F,t as g,F as b,g as d,h as V}from"./app-Bv7sA21o.js";const j="/build/assets/login-bg-VwTD_ZJ0.jpg",B={class:"wrapper"},C={class:"container"},I={class:"row justify-content-end"},L={class:"col-12 col-lg-auto"},N={class:"form-box d-flex login-form"},S={class:"my-auto col-12 py-5"},q=s("div",{class:"form-logo mb-5 pb-1"},[s("img",{src:x,alt:"V are FAMILY"})],-1),z={class:"form-group mb-4"},A={class:"form-group mb-4"},M={class:"password-group"},T={class:"form-group"},D={type:"submit",class:"btn btn-primary btn-lg w-100"},E={key:0,class:"spinner-border spinner-border-lg",role:"status"},G={key:1},P={__name:"login",setup(J){const u=m("store");m("cookies");const p=v(),a=_("password"),t=_(!1),h=o=>{t.value=!0,F.post("/api/pms-login",{email:o.email,password:o.password}).then(e=>{u.dispatch("user",e.data),p.push({name:"booking-list"}),g(e.data.message,"success").show(),t.value=!1}).catch(e=>{let r=e.response.data.message;g(r,"error").show(),t.value=!1})},f=()=>{var o;(o=u.getters.user)!=null&&o.token&&p.push({name:"booking-list"})};return w(()=>{f()}),(o,e)=>(n(),i("div",{class:"login-page",style:k(`background-image: url(${l(j)});`)},[s("div",B,[s("div",C,[s("div",I,[s("div",L,[s("div",N,[s("div",S,[q,c(l(V),{onSubmit:h},{default:y(({errors:r})=>[s("div",z,[c(l(b),{type:"text",name:"email",placeholder:"Username",class:d(["form-control form-control-lg bg-transparent",{"border-danger":r.email}]),rules:"required|email"},null,8,["class"])]),s("div",A,[s("div",M,[c(l(b),{type:a.value,name:"password",placeholder:"Password",class:d(["form-control form-control-lg bg-transparent",{"border-danger":r.password}]),rules:"required"},null,8,["type","class"]),s("button",{type:"button",class:"input-group-text",onClick:e[0]||(e[0]=()=>a.value=a.value==="password"?"text":"password")},[s("i",{class:d(["fs-5",{"bi bi-eye-fill":a.value==="password","bi bi-eye-slash-fill":a.value==="text"}])},null,2)])])]),s("div",T,[s("button",D,[t.value?(n(),i("div",E)):(n(),i("span",G,"LOGIN"))])])]),_:1})])])])])])])],4))}};export{P as default};
