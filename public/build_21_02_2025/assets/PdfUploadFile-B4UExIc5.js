import{j as B,z as I,r as x,Q as v,ac as C,o as z,x as R,a as o,c as n,G as g,b as e,e as s,E as _,K as u,I as D,g as V,f as j,a1 as E,a2 as M}from"./app-Bv7sA21o.js";import{v as O}from"./validate-file-EZHt4CEQ.js";import{d as A}from"./modal-WLjbOo64.js";const p=a=>(E("data-v-ab102799"),a=a(),M(),a),G={key:0,class:"d-flex justify-content-center py-5"},K=p(()=>e("div",{class:"spinner-border",role:"status"},null,-1)),L=[K],Q=["name","id","accept"],Y={class:"upload-info"},$=["href"],q=p(()=>e("i",{class:"bi bi-filetype-pdf fs-1"},null,-1)),H={class:"upload-info-text"},J=p(()=>e("i",{class:"bi bi-trash"},null,-1)),W=[J],X={key:1,class:"text-danger mt-2 fs-12"},Z=p(()=>e("i",{class:"icon-upload"},null,-1)),ee={class:"upload-info-text"},te=p(()=>e("strong",null,[_("Drag & Drop Or "),e("span",{class:"text-primary"},"Browse"),_(" Your PDF File.")],-1)),ae={class:"text-danger mt-2 fs-12"},le={__name:"PdfUploadFile",props:{name:String,id:String,rules:String,info:String,changeText:String,isDeleteDisabled:Boolean,fileName:String,filePath:String,size:String,acceptType:String},emits:["emitUploadFile","emitDeleteUploadFile","emitDeleteFrontendUploadFile"],setup(a,{emit:S}){const y=I(),r=a,c=S,t=x({}),h=x(!1),k=v(r,"filePath"),U=v(r,"name"),w=v(r,"rules"),{errorMessage:d,handleBlur:F,handleChange:b,resetField:N}=C(U,w),P=async f=>{const l=f.target.files[0],i=new FormData;if(f.target.value=null,l.type!=="application/pdf"){d.value="Only PDF files are allowed!",t.value={};return}if(O(l,d.value,Number(r.size))===!1){t.value={};return}i.append("file",l);try{h.value=!0;const m=await j.post("/api/upload",i);m.data.status&&(t.value=m.data,c("emitUploadFile",t.value),setTimeout(()=>{h.value=!1},300))}catch(m){console.error("File upload failed",m)}},T=()=>{t.value.uploadType?(t.value={},c("emitDeleteFrontendUploadFile")):A("Are you sure you want to delete permanently?",function(){t.value={},y.params.id?c("emitDeleteUploadFile",y.params.id):c("emitDeleteUploadFile")}).show()};return z(()=>{k.value&&(t.value={filepath:r.filePath,filename:r.fileName},R(()=>{c("emitUploadFile",t.value)}))}),(f,l)=>(o(),n("div",{class:V(["upload-wrapper",{"border-danger":!!s(d)}])},[h.value?(o(),n("div",G,L)):(o(),n(g,{key:1},[e("input",{type:"file",name:a.name,id:a.id,accept:a.acceptType,onInput:l[0]||(l[0]=(...i)=>s(b)&&s(b)(...i)),onBlur:l[1]||(l[1]=(...i)=>s(F)&&s(F)(...i)),onChange:P},null,40,Q),e("div",Y,[t.value.filepath?(o(),n(g,{key:0},[e("a",{href:t.value.filepath,target:"_blank"},[_(u(t.value.fileName)+" ",1),q],8,$),e("div",H,[a.isDeleteDisabled?D("",!0):(o(),n("button",{key:0,type:"button",class:"btn-link-icon text-danger mb-2",onClick:l[2]||(l[2]=i=>(T(),s(N)()))},W)),e("small",null,u(a.changeText),1),s(d)?(o(),n("small",X,u(s(d)),1)):D("",!0)])],64)):(o(),n(g,{key:1},[Z,e("div",ee,[te,e("small",null,u(a.info),1),e("small",ae,u(s(d)),1)])],64))])],64))],2))}},ne=B(le,[["__scopeId","data-v-ab102799"]]);export{ne as default};
