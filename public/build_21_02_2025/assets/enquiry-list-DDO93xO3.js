import{r as o,p as D,o as G,B as $,a as u,c as _,b as e,d as m,w as C,e as h,G as Y,H,I as F,K as i,f as I,a8 as K,F as N,L as R,h as Q,E as p,M as z,x as J}from"./app-Bv7sA21o.js";import{_ as W}from"./pagination-B7joSJ4y.js";import{u as X}from"./debouncedRef-B_9CytHk.js";import{f as B,c as Z}from"./common-iZsm-le3.js";import{d as v}from"./dayjs.min-CU4dOPv8.js";const j={class:"page-wrap property-add"},ee={class:"page-title mb-4"},te={class:"row gy-3 align-items-center"},ae=e("div",{class:"col align-self-end"},[e("h1",{class:"h2 mb-0"},"Booking Enquiry List")],-1),se={class:"col-12"},le={class:"search-filter"},oe={class:"row gy-3 gx-2"},ne={class:"col-12 col-md-4 col-lg-3 col-xxl"},ce={class:"form-group mb-0"},de={class:"col-12 col-md-4 col-lg-3 col-xxl"},ie={class:"form-group mb-0"},re={class:"col-12 col-md-4 col-lg-3 col-xxl"},ue={class:"form-group mb-0"},_e={class:"col-12 col-md-auto"},me={class:"btn-group gap-2"},he=["disabled"],ve=e("span",{class:"icon-search"},null,-1),fe=[ve],pe=["onClick"],ye=e("span",{class:"bi bi-arrow-clockwise"},null,-1),be=[ye],ge={class:"section"},ke={key:0,class:"d-flex justify-content-center py-5"},we=e("div",{class:"spinner-border",role:"status"},null,-1),xe=[we],Ve={key:0,class:"outer-wrapper"},Me={class:"table-wrap"},De={class:"table-responsive"},Ce={class:"table align-middle mb-0 mw-lg"},Ne=e("thead",null,[e("tr",null,[e("th",{width:"35%",class:"text-secondary fw-semibold"},"Property Name"),e("th",{class:"text-secondary fw-semibold"},"Booking Detail"),e("th",{width:"15%",class:"text-secondary fw-semibold"},"Price"),e("th",{width:"15%",class:"text-secondary fw-semibold"},"Name"),e("th",{width:"15%",class:"text-secondary fw-semibold"},"Email"),e("th",{width:"15%",class:"text-secondary fw-semibold"},"Mobile No."),e("th",{width:"15%",class:"text-secondary fw-semibold"},"Enquiry Message")])],-1),qe={nowrap:""},Ee=e("i",{class:"bi bi-calendar2-check"},null,-1),Pe=e("br",null,null,-1),Ye=e("i",{class:"bi bi-calendar2-check"},null,-1),Fe=e("br",null,null,-1),Ie=e("i",{class:"bi bi-moon"},null,-1),Re=e("br",null,null,-1),Be=e("i",{class:"bi bi-people"},null,-1),Le={key:0},Oe={class:"text-center"},Se=["onClick"],Ue={class:"table-footer pt-3"},Te={class:"row align-items-center"},Ae={key:0,class:"col"},Ge={key:1,class:"message text-center"},$e=e("h6",{class:"fw-bold"},"No Record Found",-1),He=[$e],Ke={class:"modal",id:"viewEnquiryModal"},Qe={class:"modal-dialog modal-dialog-centered"},ze={class:"modal-content"},Je=e("i",{class:"bi bi-x-lg fs-5"},null,-1),We=[Je],Xe=e("h6",{class:"modal-title text-white",id:"exampleModalLabel"},"Enquiry Message",-1),Ze={class:"modal-body p-3"},je={class:"row"},nt={__name:"enquiry-list",setup(et){const y=o([]),b=o({}),q=o(!1),g=o(!1),w=o([]),x=o(),L=X("",800),a=o(),s=o(),V=o(),O=o(),S=o(),r=o(),f=o(!1),E=o(""),U=l=>{E.value=l.enquiry_message},T=l=>{r.value="",l(),J(()=>{k()})},k=l=>{f.value=!0,I.get("/api/property/bookings/enquiry",{params:{page:l,checkin_date:a.value?v(a.value).format("YYYY-MM-DD"):a.value,checkout_date:s.value?v(s.value).format("YYYY-MM-DD"):s.value,property_name:r.value}}).then(t=>{t.data.status&&(y.value=t.data.data.data,b.value=t.data.data,setTimeout(()=>{g.value=!1,q.value=!1,w.value=[],f.value=!1},400))}).catch(t=>{f.value=!1})};D(L,(l,t)=>{f.value=!0,I.get("/api/company",{params:{search:l}}).then(c=>{c.data.status&&(y.value=c.data.data.data,b.value=c.data.data,setTimeout(()=>{g.value=!1,q.value=!1,w.value=[],f.value=!1},200))}).catch(c=>{console.log(c)})}),D(a,(l,t)=>{l&&(V.value=v(l).add(1,"day").format(),v(a.value)>=v(s.value),v(a.value)>=v(s.value)||s.value)});const A=()=>{K.getInstance(document.querySelector("#viewEnquiryModal")).hide()};return D(w,(l,t)=>{var c;l.length!=((c=x==null?void 0:x.value)==null?void 0:c.length)?g.value=!1:l.length&&(g.value=!0)}),G(()=>{k()}),(l,t)=>{const c=$("DatePicker");return u(),_("div",j,[e("div",ee,[e("div",te,[ae,e("div",se,[e("div",le,[m(h(Q),{as:"div"},{default:C(({errors:n,resetForm:P})=>[e("div",oe,[e("div",ne,[e("div",ce,[m(h(N),{name:"check-in-date",modelValue:a.value,"onUpdate:modelValue":t[1]||(t[1]=d=>a.value=d)},{default:C(({field:d})=>[m(c,R({ref_key:"checkInDateRef",ref:O},d,{modelValue:a.value,"onUpdate:modelValue":t[0]||(t[0]=M=>a.value=M),format:h(B),"enable-time-picker":!1,"input-class-name":"form-control",placeholder:"Check-In","auto-apply":""}),null,16,["modelValue","format"])]),_:1},8,["modelValue"])])]),e("div",de,[e("div",ie,[m(h(N),{name:"check-out-date",modelValue:s.value,"onUpdate:modelValue":t[3]||(t[3]=d=>s.value=d)},{default:C(({field:d})=>[m(c,R({ref_key:"checkOutDateRef",ref:S},d,{modelValue:s.value,"onUpdate:modelValue":t[2]||(t[2]=M=>s.value=M),format:h(B),"enable-time-picker":!1,"min-date":V.value,"start-date":V.value,"input-class-name":"form-control",placeholder:"Check-Out","auto-apply":""}),null,16,["modelValue","format","min-date","start-date"])]),_:1},8,["modelValue"])])]),e("div",re,[e("div",ue,[m(h(N),{name:"property_name",type:"text",class:"form-control",placeholder:"Property Name",modelValue:r.value,"onUpdate:modelValue":t[4]||(t[4]=d=>r.value=d)},null,8,["modelValue"])])]),e("div",_e,[e("div",me,[e("button",{onClick:k,class:"btn btn-primary btn-icon",disabled:!a.value&&!r.value||!s.value&&!r.value||!r.value&&!a.value&&!s.value||r.value&&a.value&&!s.value?!0:!!(r.value&&s.value&&!a.value)},fe,8,he),e("button",{onClick:d=>T(P),class:"btn btn-icon btn-clear btn-warning"},be,8,pe)])])])]),_:1})])])])]),e("section",ge,[f.value?(u(),_("div",ke,xe)):(u(),_(Y,{key:1},[y.value.length?(u(),_("div",Ve,[e("div",Me,[e("div",De,[e("table",Ce,[Ne,e("tbody",null,[(u(!0),_(Y,null,H(y.value,(n,P)=>(u(),_("tr",null,[e("td",null,i(n.property.home_name),1),e("td",null,[e("td",qe,[Ee,p(" Check-in: "+i(n.formatted_checkin_date)+" ",1),Pe,Ye,p(" Check-out: "+i(n.formatted_checkout_date),1),Fe,Ie,p(" No of Nights: "+i(n.no_of_night),1),Re,Be,p(" No of Guests: "+i(n.no_of_guest),1)])]),e("td",null,[e("b",null,"INR "+i(h(Z)(n.total_amount)),1)]),e("td",null,i(n.name),1),e("td",null,i(n.email),1),e("td",null,[n.country_code?(u(),_("span",Le,i(n.country_code)+" - ",1)):F("",!0),p(i(n.phone_no),1)]),e("td",Oe,[e("a",{href:"javascript:void(0)",class:"btn btn-sm btn-save btn-dark","data-bs-toggle":"modal","data-bs-target":"#viewEnquiryModal",onClick:z(d=>U(n),["prevent"])},"View",8,Se)])]))),256))])])])]),e("div",Ue,[e("div",Te,[b.value.last_page>1?(u(),_("div",Ae,[m(W,{links:b.value.links,onPagination:k},null,8,["links"])])):F("",!0)])])])):(u(),_("div",Ge,He)),e("div",Ke,[e("div",Qe,[e("div",ze,[e("div",{class:"modal-header bg-primary"},[e("a",{href:"javascript:void(0)",class:"closeModel",onClick:A},We),Xe]),e("div",Ze,[e("div",je,[e("p",null,i(E.value),1)])])])])])],64))])])}}};export{nt as default};
