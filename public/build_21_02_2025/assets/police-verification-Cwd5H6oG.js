import{j as R,i as F,r as a,o as L,a as n,c as i,b as e,d as f,w as B,e as g,G as D,H as I,f as M,F as x,g as w,E as U,h as T,K as v,a1 as A,a2 as P,x as j}from"./app-Bv7sA21o.js";import{d as y}from"./dayjs.min-CU4dOPv8.js";const d=h=>(A("data-v-9c485c4b"),h=h(),P(),h),z={class:"page-wrap property-add"},G={class:"page-title mb-4"},H={class:"row gy-3"},K=d(()=>e("div",{class:"col align-self-end"},[e("h1",{class:"h2 mb-0"},"Police Verification Report")],-1)),O={class:"col-12"},$={class:"search-filter"},q={class:"row gy-3 gx-2"},J={class:"col-12 col-md-4 col-lg"},Q={class:"form-group mb-0"},W={class:"col-12 col-md-4 col-lg"},X={class:"form-group mb-0"},Z={class:"col-12 col-md-4 col-lg"},ee={class:"form-group mb-0"},te={class:"col-12 col-md-auto"},oe={class:"btn-group gap-2"},le=["disabled"],ae=d(()=>e("span",{class:"icon-search"},null,-1)),se=[ae],ce=["onClick"],ne=d(()=>e("span",{class:"bi bi-arrow-clockwise"},null,-1)),ie=[ne],de=d(()=>e("i",{class:"bi bi-file-earmark-excel me-2 fs-6"},null,-1)),re={class:"section"},ue={key:0,class:"d-flex justify-content-center py-5"},_e=d(()=>e("div",{class:"spinner-border",role:"status"},null,-1)),me=[_e],pe={key:0,class:"outer-wrapper"},ve={class:"table-wrap"},he={class:"table-responsive"},be={class:"table table-list-2 align-middle mb-0 mw-lg"},fe=d(()=>e("thead",null,[e("tr",null,[e("th",null,"Customer Name"),e("th",null,"Email Id"),e("th",null,"Mobile No."),e("th",null,"Checkin Date"),e("th",null,"Checkout Date")])],-1)),ge={key:1,class:"message text-center"},ye=d(()=>e("h6",{class:"fw-bold"},"No Record Found",-1)),ke=[ye],xe={__name:"police-verification",setup(h){var V,C;const Y=F("store");(V=Y.getters.user)==null||V.role,(C=Y.getters.user)==null||C.id;const u=a(!1),b=a([]);a([]),a();const N=a(),s=a();a(0);const _=a(),m=a(),p=a(),k=c=>{if(u.value=!0,N.value&&s.value==null)return classDanger.value=!0,u.value=!1,!1;s.value&&(y(s.value[0]).format("YYYY-MM-DD"),y(s.value[1]).format("YYYY-MM-DD")),M.post("/api/police/verification/report",{name:_.value,email:m.value,mobile_no:p.value}).then(t=>{t.data.status&&(b.value=t.data.data,dataRow.value=t.data.data,propertyList.value=t.data.proeprtyList,b.value.forEach((o,l)=>{checkBookingPaymentStatus(l,o)}),setTimeout(()=>{vCheckAll.value=!1,checkedSelectAll.value=!1,vSelectCheckValue.value=[],u.value=!1},400))}).catch(t=>{u.value=!1})},E=()=>{s.value&&(y(s.value[0]).format("YYYY-MM-DD"),y(s.value[1]).format("YYYY-MM-DD")),M.post("/api/police/verification/report/export",{name:_.value,email:m.value,mobile_no:p.value},{responseType:"blob"}).then(c=>{console.log(c.data);const t=new Blob([c.data],{type:"application/octet-stream"}),o=window.URL.createObjectURL(t),l=document.createElement("a");l.href=o,l.setAttribute("download","policy-verification-report.xlsx"),document.body.appendChild(l),l.click(),document.body.removeChild(l)}).catch(c=>{})},S=c=>{c(),j(()=>{k()})};return L(()=>{k()}),(c,t)=>(n(),i("div",z,[e("div",G,[e("div",H,[K,e("div",O,[e("div",$,[f(g(T),{as:"div"},{default:B(({errors:o,resetForm:l})=>[e("div",q,[e("div",J,[e("div",Q,[f(g(x),{name:"name",type:"text",class:w(["form-control",{"border-danger":o.name}]),placeholder:"Customer Name",modelValue:_.value,"onUpdate:modelValue":t[0]||(t[0]=r=>_.value=r)},null,8,["class","modelValue"])])]),e("div",W,[e("div",X,[f(g(x),{name:"email",type:"text",class:w(["form-control",{"border-danger":o.email}]),placeholder:"Email",modelValue:m.value,"onUpdate:modelValue":t[1]||(t[1]=r=>m.value=r)},null,8,["class","modelValue"])])]),e("div",Z,[e("div",ee,[f(g(x),{name:"mobile_no",type:"text",class:w(["form-control",{"border-danger":o.mobile_no}]),placeholder:"Mobile No.",rules:"numeric",modelValue:p.value,"onUpdate:modelValue":t[2]||(t[2]=r=>p.value=r)},null,8,["class","modelValue"])])]),e("div",te,[e("div",oe,[e("button",{onClick:k,class:"btn btn-primary btn-icon",disabled:!_.value&&!m.value&&!p.value},se,8,le),e("button",{onClick:r=>S(l),class:"btn btn-icon btn-clear btn-warning"},ie,8,ce),e("button",{onClick:E,class:"btn btn-export btn-secondary"},[de,U("Export")])])])])]),_:1})])])])]),e("section",re,[u.value?(n(),i("div",ue,me)):(n(),i(D,{key:1},[b.value.length?(n(),i("div",pe,[e("div",ve,[e("div",he,[e("table",be,[fe,(n(!0),i(D,null,I(b.value,(o,l)=>(n(),i("tbody",{key:l},[e("tr",null,[e("td",null,v(o.guest_name),1),e("td",null,v(o.guest_email_id),1),e("td",null,v(o.guest_mobile_no),1),e("td",null,v(o.checkin_date),1),e("td",null,v(o.checkout_date),1)])]))),128))])])])])):(n(),i("div",ge,ke))],64))])]))}},Ve=R(xe,[["__scopeId","data-v-9c485c4b"]]);export{Ve as default};
